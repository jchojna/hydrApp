!function(e){var n={};function t(c){if(n[c])return n[c].exports;var l=n[c]={i:c,l:!1,exports:{}};return e[c].call(l.exports,l,l.exports,t),l.l=!0,l.exports}t.m=e,t.c=n,t.d=function(e,n,c){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:c})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(t.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var l in e)t.d(c,l,function(n){return e[n]}.bind(null,l));return c},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(module,exports,__webpack_require__){"use strict";eval("\n\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', function() {\n    navigator.serviceWorker.register('serviceworker.js').then(function(registration) {\n      // Registration was successful\n      console.log('ServiceWorker registration successful with scope: ', registration.scope);\n    }, function(err) {\n      // registration failed :(\n      console.log('ServiceWorker registration failed: ', err);\n    });\n  });\n}\n\n/********** VARIABLES **********/\n\nconst addGlass = document.querySelector('.app__button--js-add');\nconst removeGlass = document.querySelector('.app__button--js-remove');\nconst counter = document.querySelector('.glass__counter--js');\nconst archive = document.querySelector('.archive--js');\nconst archiveList = document.querySelector('.archive__list--js');\nconst archiveButton = document.querySelector('.app__button--js-archive');\n\n/********** FUNCTIONS **********/\n\n// create hydrApp date key\nconst setDateKey = (obj) => {\n  const prefix = 'hydrApp-';\n  const date = obj.toISOString().slice(0,10);\n  return prefix.concat(date);\n}\n\n// create key value pair in localStorage\nconst setNewKeyValue = (key, value) => {\n  if ( !localStorage.getItem(key) ) {\n    localStorage.setItem(key, value);\n  };\n}\n\nconst getHydrappKeys = () => {\n  // create array of hydrApp localStorage keys\n  const regex = /hydrApp-/;\n  return Object\n  .keys(localStorage)\n  .filter(key => regex.test(key))\n  .sort((a,b) => a<b);\n}\n\nconst setCounter = () => {\n  let date = new Date();\n  let dateKey = setDateKey(date);\n\n  setNewKeyValue(dateKey, 0);\n\n  const hydrappKeys = getHydrappKeys();\n  const oldestKey = hydrappKeys[hydrappKeys.length-1];\n\n  // autocomplete missing keys\n  if ( hydrappKeys.length > 1 ) {\n    let limit = 0; // for tests to avoid loop error\n\n    while (setDateKey(date) !== oldestKey && limit < 50) {\n      date.setDate( date.getDate() - 1 );\n      const prevDateKey = setDateKey(date);\n      setNewKeyValue(prevDateKey, 0);\n      limit++;\n    }\n  }\n  counter.innerHTML = localStorage.getItem(dateKey);\n}\n\nconst setArchive = () => {\n  const hydrappKeys = getHydrappKeys();\n\n  for (const key of hydrappKeys) {\n    const value = localStorage.getItem(key);\n    const date = key\n      .replace('hydrApp-','')\n      .split('-')\n      .reverse()\n      .join(' ');\n\n    archiveList.innerHTML += `\n    <li class=\"archive__item\">\n      <span>${date}</span>\n      <span>${value}</span>\n    </li>\n    `;\n  }\n\n}\n\nconst updateCounter = (e) => {\n  const key = setDateKey(new Date());\n  const value = parseInt(localStorage.getItem(key));\n  let newValue;\n\n  if (e.target === addGlass) {\n    value < 100 ? newValue = value + 1 : newValue = 100;\n  } else if (e.target === removeGlass) {\n    value > 0 ? newValue = value - 1 : newValue = 0;\n  }\n\n  localStorage.setItem(key, newValue);\n  counter.innerHTML = newValue;\n}\n\nconst toggleArchive = (e) => {\n  const listHeight = archiveList.clientHeight;\n  console.log(listHeight);\n\n  if (archive.classList.contains('archive--visible')) {\n    archive.classList.remove('archive--visible');\n    archive.style.height = 0;\n    e.target.textContent = \"Show archive\";\n  } else {\n    archive.classList.add('archive--visible');\n    archive.style.height = listHeight + \"px\";\n    e.target.textContent = \"Hide archive\";\n  }\n}\n\n\nsetCounter();\nsetArchive();\naddGlass.addEventListener('click', updateCounter);\nremoveGlass.addEventListener('click', updateCounter);\narchiveButton.addEventListener('click', toggleArchive);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFpbi5qcz85MjkxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCOztBQUVsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYyxLQUFLO0FBQ25CLGNBQWMsTUFBTTtBQUNwQjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oKSB7XG4gICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJ3NlcnZpY2V3b3JrZXIuanMnKS50aGVuKGZ1bmN0aW9uKHJlZ2lzdHJhdGlvbikge1xuICAgICAgLy8gUmVnaXN0cmF0aW9uIHdhcyBzdWNjZXNzZnVsXG4gICAgICBjb25zb2xlLmxvZygnU2VydmljZVdvcmtlciByZWdpc3RyYXRpb24gc3VjY2Vzc2Z1bCB3aXRoIHNjb3BlOiAnLCByZWdpc3RyYXRpb24uc2NvcGUpO1xuICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgLy8gcmVnaXN0cmF0aW9uIGZhaWxlZCA6KFxuICAgICAgY29uc29sZS5sb2coJ1NlcnZpY2VXb3JrZXIgcmVnaXN0cmF0aW9uIGZhaWxlZDogJywgZXJyKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbi8qKioqKioqKioqIFZBUklBQkxFUyAqKioqKioqKioqL1xuXG5jb25zdCBhZGRHbGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcHBfX2J1dHRvbi0tanMtYWRkJyk7XG5jb25zdCByZW1vdmVHbGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcHBfX2J1dHRvbi0tanMtcmVtb3ZlJyk7XG5jb25zdCBjb3VudGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdsYXNzX19jb3VudGVyLS1qcycpO1xuY29uc3QgYXJjaGl2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcmNoaXZlLS1qcycpO1xuY29uc3QgYXJjaGl2ZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJjaGl2ZV9fbGlzdC0tanMnKTtcbmNvbnN0IGFyY2hpdmVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXBwX19idXR0b24tLWpzLWFyY2hpdmUnKTtcblxuLyoqKioqKioqKiogRlVOQ1RJT05TICoqKioqKioqKiovXG5cbi8vIGNyZWF0ZSBoeWRyQXBwIGRhdGUga2V5XG5jb25zdCBzZXREYXRlS2V5ID0gKG9iaikgPT4ge1xuICBjb25zdCBwcmVmaXggPSAnaHlkckFwcC0nO1xuICBjb25zdCBkYXRlID0gb2JqLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwxMCk7XG4gIHJldHVybiBwcmVmaXguY29uY2F0KGRhdGUpO1xufVxuXG4vLyBjcmVhdGUga2V5IHZhbHVlIHBhaXIgaW4gbG9jYWxTdG9yYWdlXG5jb25zdCBzZXROZXdLZXlWYWx1ZSA9IChrZXksIHZhbHVlKSA9PiB7XG4gIGlmICggIWxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkgKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7XG4gIH07XG59XG5cbmNvbnN0IGdldEh5ZHJhcHBLZXlzID0gKCkgPT4ge1xuICAvLyBjcmVhdGUgYXJyYXkgb2YgaHlkckFwcCBsb2NhbFN0b3JhZ2Uga2V5c1xuICBjb25zdCByZWdleCA9IC9oeWRyQXBwLS87XG4gIHJldHVybiBPYmplY3RcbiAgLmtleXMobG9jYWxTdG9yYWdlKVxuICAuZmlsdGVyKGtleSA9PiByZWdleC50ZXN0KGtleSkpXG4gIC5zb3J0KChhLGIpID0+IGE8Yik7XG59XG5cbmNvbnN0IHNldENvdW50ZXIgPSAoKSA9PiB7XG4gIGxldCBkYXRlID0gbmV3IERhdGUoKTtcbiAgbGV0IGRhdGVLZXkgPSBzZXREYXRlS2V5KGRhdGUpO1xuXG4gIHNldE5ld0tleVZhbHVlKGRhdGVLZXksIDApO1xuXG4gIGNvbnN0IGh5ZHJhcHBLZXlzID0gZ2V0SHlkcmFwcEtleXMoKTtcbiAgY29uc3Qgb2xkZXN0S2V5ID0gaHlkcmFwcEtleXNbaHlkcmFwcEtleXMubGVuZ3RoLTFdO1xuXG4gIC8vIGF1dG9jb21wbGV0ZSBtaXNzaW5nIGtleXNcbiAgaWYgKCBoeWRyYXBwS2V5cy5sZW5ndGggPiAxICkge1xuICAgIGxldCBsaW1pdCA9IDA7IC8vIGZvciB0ZXN0cyB0byBhdm9pZCBsb29wIGVycm9yXG5cbiAgICB3aGlsZSAoc2V0RGF0ZUtleShkYXRlKSAhPT0gb2xkZXN0S2V5ICYmIGxpbWl0IDwgNTApIHtcbiAgICAgIGRhdGUuc2V0RGF0ZSggZGF0ZS5nZXREYXRlKCkgLSAxICk7XG4gICAgICBjb25zdCBwcmV2RGF0ZUtleSA9IHNldERhdGVLZXkoZGF0ZSk7XG4gICAgICBzZXROZXdLZXlWYWx1ZShwcmV2RGF0ZUtleSwgMCk7XG4gICAgICBsaW1pdCsrO1xuICAgIH1cbiAgfVxuICBjb3VudGVyLmlubmVySFRNTCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGRhdGVLZXkpO1xufVxuXG5jb25zdCBzZXRBcmNoaXZlID0gKCkgPT4ge1xuICBjb25zdCBoeWRyYXBwS2V5cyA9IGdldEh5ZHJhcHBLZXlzKCk7XG5cbiAgZm9yIChjb25zdCBrZXkgb2YgaHlkcmFwcEtleXMpIHtcbiAgICBjb25zdCB2YWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgY29uc3QgZGF0ZSA9IGtleVxuICAgICAgLnJlcGxhY2UoJ2h5ZHJBcHAtJywnJylcbiAgICAgIC5zcGxpdCgnLScpXG4gICAgICAucmV2ZXJzZSgpXG4gICAgICAuam9pbignICcpO1xuXG4gICAgYXJjaGl2ZUxpc3QuaW5uZXJIVE1MICs9IGBcbiAgICA8bGkgY2xhc3M9XCJhcmNoaXZlX19pdGVtXCI+XG4gICAgICA8c3Bhbj4ke2RhdGV9PC9zcGFuPlxuICAgICAgPHNwYW4+JHt2YWx1ZX08L3NwYW4+XG4gICAgPC9saT5cbiAgICBgO1xuICB9XG5cbn1cblxuY29uc3QgdXBkYXRlQ291bnRlciA9IChlKSA9PiB7XG4gIGNvbnN0IGtleSA9IHNldERhdGVLZXkobmV3IERhdGUoKSk7XG4gIGNvbnN0IHZhbHVlID0gcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSk7XG4gIGxldCBuZXdWYWx1ZTtcblxuICBpZiAoZS50YXJnZXQgPT09IGFkZEdsYXNzKSB7XG4gICAgdmFsdWUgPCAxMDAgPyBuZXdWYWx1ZSA9IHZhbHVlICsgMSA6IG5ld1ZhbHVlID0gMTAwO1xuICB9IGVsc2UgaWYgKGUudGFyZ2V0ID09PSByZW1vdmVHbGFzcykge1xuICAgIHZhbHVlID4gMCA/IG5ld1ZhbHVlID0gdmFsdWUgLSAxIDogbmV3VmFsdWUgPSAwO1xuICB9XG5cbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBuZXdWYWx1ZSk7XG4gIGNvdW50ZXIuaW5uZXJIVE1MID0gbmV3VmFsdWU7XG59XG5cbmNvbnN0IHRvZ2dsZUFyY2hpdmUgPSAoZSkgPT4ge1xuICBjb25zdCBsaXN0SGVpZ2h0ID0gYXJjaGl2ZUxpc3QuY2xpZW50SGVpZ2h0O1xuICBjb25zb2xlLmxvZyhsaXN0SGVpZ2h0KTtcblxuICBpZiAoYXJjaGl2ZS5jbGFzc0xpc3QuY29udGFpbnMoJ2FyY2hpdmUtLXZpc2libGUnKSkge1xuICAgIGFyY2hpdmUuY2xhc3NMaXN0LnJlbW92ZSgnYXJjaGl2ZS0tdmlzaWJsZScpO1xuICAgIGFyY2hpdmUuc3R5bGUuaGVpZ2h0ID0gMDtcbiAgICBlLnRhcmdldC50ZXh0Q29udGVudCA9IFwiU2hvdyBhcmNoaXZlXCI7XG4gIH0gZWxzZSB7XG4gICAgYXJjaGl2ZS5jbGFzc0xpc3QuYWRkKCdhcmNoaXZlLS12aXNpYmxlJyk7XG4gICAgYXJjaGl2ZS5zdHlsZS5oZWlnaHQgPSBsaXN0SGVpZ2h0ICsgXCJweFwiO1xuICAgIGUudGFyZ2V0LnRleHRDb250ZW50ID0gXCJIaWRlIGFyY2hpdmVcIjtcbiAgfVxufVxuXG5cbnNldENvdW50ZXIoKTtcbnNldEFyY2hpdmUoKTtcbmFkZEdsYXNzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdXBkYXRlQ291bnRlcik7XG5yZW1vdmVHbGFzcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHVwZGF0ZUNvdW50ZXIpO1xuYXJjaGl2ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZUFyY2hpdmUpOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n")}]);