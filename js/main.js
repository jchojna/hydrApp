!function(e){var t={};function n(l){if(t[l])return t[l].exports;var c=t[l]={i:l,l:!1,exports:{}};return e[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}n.m=e,n.c=t,n.d=function(e,t,l){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)n.d(l,c,function(t){return e[t]}.bind(null,c));return l},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(module,exports,__webpack_require__){"use strict";eval("\n\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', function() {\n    navigator.serviceWorker.register('serviceworker.js').then(function(registration) {\n      // Registration was successful\n      //console.log('ServiceWorker registration successful with scope: ', registration.scope);\n    }, function(err) {\n      // registration failed :(\n      console.log('ServiceWorker registration failed: ', err);\n    });\n  });\n}\n\n/********** VARIABLES **********/\n\nconst pageOverlay = document.querySelector('.page-overlay--js');\nconst addGlass = document.querySelector('.app__button--js-add');\nconst removeGlass = document.querySelector('.app__button--js-remove');\nconst counter = document.querySelector('.glass__counter--js');\nconst archive = document.querySelector('.archive--js');\nconst archiveList = document.querySelector('.archive__list--js');\nconst archiveButton = document.querySelector('.app__button--js-archive');\n\nconst counterMaxValue = 100;\n\nconst baseClassname = \"indicator__section indicator__section--js\";\nconst lowLevelClassname = `${baseClassname} indicator__section--low`;\nconst mediumLevelClassname = `${baseClassname} indicator__section--medium`;\nconst highLevelClassname = `${baseClassname} indicator__section--high`;\n\n/********** FUNCTIONS **********/\n\n// create hydrApp date key\nconst setDateKey = (obj) => {\n  const prefix = 'hydrApp-';\n  const date = obj.toISOString().slice(0,10);\n  return prefix.concat(date);\n}\n\n// create key value pair in localStorage\nconst setNewKeyValue = (key, value) => {\n  if ( !localStorage.getItem(key) ) {\n    localStorage.setItem(key, value);\n  };\n}\n\nconst getHydrappKeys = () => {\n  // create array of hydrApp localStorage keys\n  const regex = /hydrApp-/;\n  return Object\n  .keys(localStorage)\n  .filter(key => regex.test(key))\n  .sort()\n  .reverse();\n}\n\nconst getDateID = (date) => {\n  return date\n    .replace('hydrApp-','')\n    .split('-')\n    .reverse()\n    .join('');\n}\n\nconst getOffsetedDate = () => {\n  const timeZoneOffset = (new Date()).getTimezoneOffset() * 60000;\n  return (new Date(Date.now() - timeZoneOffset));\n}\n\n\nconst setCounter = () => {\n  const offsetedDate = getOffsetedDate();\n  let dateKey = setDateKey(offsetedDate);\n  console.log(`newest key: ${dateKey}`);\n\n  setNewKeyValue(dateKey, 0);\n\n  const hydrappKeys = getHydrappKeys();\n  const oldestKey = hydrappKeys[hydrappKeys.length-1];\n  console.log(`oldest key: ${oldestKey}`);\n\n  // autocomplete missing keys in localstorage\n  if ( hydrappKeys.length > 1 ) {\n    let limit = 0; // for tests to avoid loop error\n\n    while (setDateKey(offsetedDate) !== oldestKey && limit < 50) {\n      offsetedDate.setDate( offsetedDate.getDate() - 1 );\n      const prevDateKey = setDateKey(offsetedDate);\n      setNewKeyValue(prevDateKey, 0);\n      limit++;\n    }\n  }\n  counter.innerHTML = localStorage.getItem(dateKey);\n}\n\nconst setArchive = () => {\n  const hydrappKeys = getHydrappKeys();\n\n  if (hydrappKeys.length === 1) {\n    archiveList.innerHTML += `\n      <li class=\"archive__item archive__item--empty\">No history yet...</li>\n      `;\n  } else {\n    for (let i = 1; i < hydrappKeys.length; i++) {\n      const key = hydrappKeys[i];\n      const value = localStorage.getItem(key);\n      const date = key\n        .replace('hydrApp-','')\n        .split('-')\n        .reverse()\n        .join(' ');\n      const dateID = date.replace(/\\s/g,'');\n      \n      archiveList.innerHTML += `\n      <li class=\"archive__item archive__item--js ${key}\">\n        <p class=\"archive__date\">${date}</p>\n        <p class=\"archive__value archive__value--js\">\n          ${value}\n        </p>\n        <div class=\"edition\">\n          <button class=\"button edition__edit edition__edit--js\">\n            <i class=\"edition__icon far fa-edit\"></i>\n          </button>\n          <div class=\"edition__group edition__group--js\">\n            <button class=\"button edition__decrease edition__decrease--js\">\n              <i class=\"edition__icon fas fa-caret-left\"></i>\n            </button>\n            <button class=\"button edition__increase edition__increase--js\">\n              <i class=\"edition__icon fas fa-caret-right\"></i>\n            </button>\n            <button class=\"button edition__cancel edition__cancel--js\">\n              <i class=\"edition__icon fas fa-undo\"></i>\n            </button>\n            <button class=\"button edition__save edition__save--js\">\n              <i class=\"edition__icon far fa-save\"></i>\n            </button>\n          </div>\n        </div>\n        <div class=\"indicator indicator--js-${dateID}\">\n          <div class=\"${baseClassname}\"></div>\n          <div class=\"${baseClassname}\"></div>\n          <div class=\"${baseClassname}\"></div>\n        </div>\n      </li>\n      `;\n  \n      setIndicators(dateID, value);\n    }\n  }\n}\n\nconst setIndicators = (id, value) => {\n  const indicators = document.querySelectorAll(`.indicator--js-${id} .indicator__section--js`);\n\n  if (value >= 6) {\n    for (const indicator of indicators) {\n      indicator.className = highLevelClassname;\n    }\n  } else if (value >= 3) {\n    indicators[0].className = mediumLevelClassname;\n    indicators[1].className = mediumLevelClassname;\n    indicators[2].className = baseClassname;\n  } else {\n    indicators[0].className = lowLevelClassname;\n    indicators[1].className = baseClassname;\n    indicators[2].className = baseClassname;\n  }\n}\n\nconst updateCounter = (e) => {\n  const offsetedDate = getOffsetedDate();\n  const key = setDateKey(offsetedDate);\n  const value = parseInt(localStorage.getItem(key));\n  let newValue;\n\n  if (e.target === addGlass) {\n    value < counterMaxValue ? newValue = value + 1 : newValue = counterMaxValue;\n  } else if (e.target === removeGlass) {\n    value > 0 ? newValue = value - 1 : newValue = 0;\n  }\n\n  localStorage.setItem(key, newValue);\n  counter.innerHTML = newValue;\n  \n  // updating archive newest entry indicator\n  const dateID = offsetedDate\n    .toISOString()\n    .slice(0,10)\n    .split('-')\n    .reverse()\n    .join('');\n  setIndicators(dateID, newValue);\n}\n\nconst toggleArchive = (e) => {\n  const listHeight = archiveList.clientHeight;\n\n  if (archive.classList.contains('archive--visible')) {\n    archive.classList.remove('archive--visible');\n    archive.style.height = 0;\n    e.target.textContent = \"Show archive\";\n  } else {\n    archive.classList.add('archive--visible');\n    archive.style.height = listHeight + \"px\";\n    e.target.textContent = \"Hide archive\";\n  }\n}\n\nconst handleItemEdit = (e) => {\n  const itemIndex = e.target.index;\n  const archiveItem = archiveItems[itemIndex];\n  const editButton = editButtons[itemIndex];\n  const editGroup = editGroups[itemIndex];\n  const decreaseButton = decreaseButtons[itemIndex];\n  const increaseButton = increaseButtons[itemIndex];\n  const cancelButton = cancelButtons[itemIndex];\n  const saveButton = saveButtons[itemIndex];\n  const archiveValue = archiveValues[itemIndex];\n  const lastValue = archiveValue.textContent;\n\n  const itemClassName = e.target.parentElement.parentElement.className;\n  const hydrAppKey = itemClassName\n    .split(' ')\n    .filter(key => /hydrApp/.test(key))\n    .toString();\n  const dateID = getDateID(hydrAppKey);\n\n  const toggleItemDisplay = () => {\n    archiveItem.classList.toggle('archive__item--on-top');\n    editButton.classList.toggle('edition__edit--hidden');\n    editGroup.classList.toggle('edition__group--visible');\n    pageOverlay.classList.toggle('page-overlay--visible');\n  }\n    \n  const exitEditMode = () => {\n    toggleItemDisplay();\n    const lastValue = localStorage.getItem(hydrAppKey);\n    archiveValue.textContent = lastValue;\n    setIndicators(dateID, lastValue);\n    // removing all event listeners\n    cancelButton.removeEventListener('click', exitEditMode);\n    pageOverlay.removeEventListener('click', exitEditMode);\n    decreaseButton.removeEventListener('click', updateValue);\n    increaseButton.removeEventListener('click', updateValue);\n    saveButton.removeEventListener('click', saveValue)\n  }\n\n  const updateValue = (e) => {   // ZOPTYMALIZOWAC Z UPDATE COUNTER\n    let value = archiveValue.textContent;\n    if (e.target === decreaseButton) {\n      value > 0 ? value-- : false;\n    } else {\n      value < counterMaxValue ? value++ : false;\n    }\n    archiveValue.textContent = value;\n    setIndicators(dateID, value);\n  }\n\n  const saveValue = () => {\n    localStorage.setItem(hydrAppKey, archiveValue.textContent);\n    exitEditMode();\n  }\n\n  toggleItemDisplay();\n  cancelButton.addEventListener('click', exitEditMode);\n  pageOverlay.addEventListener('click', exitEditMode);\n  decreaseButton.addEventListener('click', updateValue);\n  increaseButton.addEventListener('click', updateValue);\n  saveButton.addEventListener('click', saveValue);\n}\n\nsetCounter();\nsetArchive();\n\nconst archiveItems = document.querySelectorAll('.archive__item--js');\nconst editButtons = document.querySelectorAll('.edition__edit--js');\nconst editGroups = document.querySelectorAll('.edition__group--js');\nconst decreaseButtons = document.querySelectorAll('.edition__decrease--js');\nconst increaseButtons = document.querySelectorAll('.edition__increase--js');\nconst cancelButtons = document.querySelectorAll('.edition__cancel--js');\nconst saveButtons = document.querySelectorAll('.edition__save--js');\nconst archiveValues = document.querySelectorAll('.archive__value--js');\n\naddGlass.addEventListener('click', updateCounter);\nremoveGlass.addEventListener('click', updateCounter);\narchiveButton.addEventListener('click', toggleArchive);\n\nfor (let i = 0; i < editButtons.length; i++) {\n  const editButton = editButtons[i];\n  editButton.index = i;\n  editButton.addEventListener('click', handleItemEdit);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFpbi5qcz85MjkxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSw2QkFBNkIsY0FBYztBQUMzQyxnQ0FBZ0MsY0FBYztBQUM5Qyw4QkFBOEIsY0FBYzs7QUFFNUM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixRQUFROztBQUVyQzs7QUFFQTtBQUNBO0FBQ0EsNkJBQTZCLFVBQVU7O0FBRXZDO0FBQ0E7QUFDQSxrQkFBa0I7O0FBRWxCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILG1CQUFtQix3QkFBd0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1EQUFtRCxJQUFJO0FBQ3ZELG1DQUFtQyxLQUFLO0FBQ3hDO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsT0FBTztBQUNyRCx3QkFBd0IsY0FBYztBQUN0Qyx3QkFBd0IsY0FBYztBQUN0Qyx3QkFBd0IsY0FBYztBQUN0QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpRUFBaUUsR0FBRzs7QUFFcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsZUFBZSx3QkFBd0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pZiAoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikge1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkge1xuICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKCdzZXJ2aWNld29ya2VyLmpzJykudGhlbihmdW5jdGlvbihyZWdpc3RyYXRpb24pIHtcbiAgICAgIC8vIFJlZ2lzdHJhdGlvbiB3YXMgc3VjY2Vzc2Z1bFxuICAgICAgLy9jb25zb2xlLmxvZygnU2VydmljZVdvcmtlciByZWdpc3RyYXRpb24gc3VjY2Vzc2Z1bCB3aXRoIHNjb3BlOiAnLCByZWdpc3RyYXRpb24uc2NvcGUpO1xuICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgLy8gcmVnaXN0cmF0aW9uIGZhaWxlZCA6KFxuICAgICAgY29uc29sZS5sb2coJ1NlcnZpY2VXb3JrZXIgcmVnaXN0cmF0aW9uIGZhaWxlZDogJywgZXJyKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbi8qKioqKioqKioqIFZBUklBQkxFUyAqKioqKioqKioqL1xuXG5jb25zdCBwYWdlT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYWdlLW92ZXJsYXktLWpzJyk7XG5jb25zdCBhZGRHbGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcHBfX2J1dHRvbi0tanMtYWRkJyk7XG5jb25zdCByZW1vdmVHbGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcHBfX2J1dHRvbi0tanMtcmVtb3ZlJyk7XG5jb25zdCBjb3VudGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdsYXNzX19jb3VudGVyLS1qcycpO1xuY29uc3QgYXJjaGl2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcmNoaXZlLS1qcycpO1xuY29uc3QgYXJjaGl2ZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJjaGl2ZV9fbGlzdC0tanMnKTtcbmNvbnN0IGFyY2hpdmVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXBwX19idXR0b24tLWpzLWFyY2hpdmUnKTtcblxuY29uc3QgY291bnRlck1heFZhbHVlID0gMTAwO1xuXG5jb25zdCBiYXNlQ2xhc3NuYW1lID0gXCJpbmRpY2F0b3JfX3NlY3Rpb24gaW5kaWNhdG9yX19zZWN0aW9uLS1qc1wiO1xuY29uc3QgbG93TGV2ZWxDbGFzc25hbWUgPSBgJHtiYXNlQ2xhc3NuYW1lfSBpbmRpY2F0b3JfX3NlY3Rpb24tLWxvd2A7XG5jb25zdCBtZWRpdW1MZXZlbENsYXNzbmFtZSA9IGAke2Jhc2VDbGFzc25hbWV9IGluZGljYXRvcl9fc2VjdGlvbi0tbWVkaXVtYDtcbmNvbnN0IGhpZ2hMZXZlbENsYXNzbmFtZSA9IGAke2Jhc2VDbGFzc25hbWV9IGluZGljYXRvcl9fc2VjdGlvbi0taGlnaGA7XG5cbi8qKioqKioqKioqIEZVTkNUSU9OUyAqKioqKioqKioqL1xuXG4vLyBjcmVhdGUgaHlkckFwcCBkYXRlIGtleVxuY29uc3Qgc2V0RGF0ZUtleSA9IChvYmopID0+IHtcbiAgY29uc3QgcHJlZml4ID0gJ2h5ZHJBcHAtJztcbiAgY29uc3QgZGF0ZSA9IG9iai50b0lTT1N0cmluZygpLnNsaWNlKDAsMTApO1xuICByZXR1cm4gcHJlZml4LmNvbmNhdChkYXRlKTtcbn1cblxuLy8gY3JlYXRlIGtleSB2YWx1ZSBwYWlyIGluIGxvY2FsU3RvcmFnZVxuY29uc3Qgc2V0TmV3S2V5VmFsdWUgPSAoa2V5LCB2YWx1ZSkgPT4ge1xuICBpZiAoICFsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpICkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgdmFsdWUpO1xuICB9O1xufVxuXG5jb25zdCBnZXRIeWRyYXBwS2V5cyA9ICgpID0+IHtcbiAgLy8gY3JlYXRlIGFycmF5IG9mIGh5ZHJBcHAgbG9jYWxTdG9yYWdlIGtleXNcbiAgY29uc3QgcmVnZXggPSAvaHlkckFwcC0vO1xuICByZXR1cm4gT2JqZWN0XG4gIC5rZXlzKGxvY2FsU3RvcmFnZSlcbiAgLmZpbHRlcihrZXkgPT4gcmVnZXgudGVzdChrZXkpKVxuICAuc29ydCgpXG4gIC5yZXZlcnNlKCk7XG59XG5cbmNvbnN0IGdldERhdGVJRCA9IChkYXRlKSA9PiB7XG4gIHJldHVybiBkYXRlXG4gICAgLnJlcGxhY2UoJ2h5ZHJBcHAtJywnJylcbiAgICAuc3BsaXQoJy0nKVxuICAgIC5yZXZlcnNlKClcbiAgICAuam9pbignJyk7XG59XG5cbmNvbnN0IGdldE9mZnNldGVkRGF0ZSA9ICgpID0+IHtcbiAgY29uc3QgdGltZVpvbmVPZmZzZXQgPSAobmV3IERhdGUoKSkuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwMDAwO1xuICByZXR1cm4gKG5ldyBEYXRlKERhdGUubm93KCkgLSB0aW1lWm9uZU9mZnNldCkpO1xufVxuXG5cbmNvbnN0IHNldENvdW50ZXIgPSAoKSA9PiB7XG4gIGNvbnN0IG9mZnNldGVkRGF0ZSA9IGdldE9mZnNldGVkRGF0ZSgpO1xuICBsZXQgZGF0ZUtleSA9IHNldERhdGVLZXkob2Zmc2V0ZWREYXRlKTtcbiAgY29uc29sZS5sb2coYG5ld2VzdCBrZXk6ICR7ZGF0ZUtleX1gKTtcblxuICBzZXROZXdLZXlWYWx1ZShkYXRlS2V5LCAwKTtcblxuICBjb25zdCBoeWRyYXBwS2V5cyA9IGdldEh5ZHJhcHBLZXlzKCk7XG4gIGNvbnN0IG9sZGVzdEtleSA9IGh5ZHJhcHBLZXlzW2h5ZHJhcHBLZXlzLmxlbmd0aC0xXTtcbiAgY29uc29sZS5sb2coYG9sZGVzdCBrZXk6ICR7b2xkZXN0S2V5fWApO1xuXG4gIC8vIGF1dG9jb21wbGV0ZSBtaXNzaW5nIGtleXMgaW4gbG9jYWxzdG9yYWdlXG4gIGlmICggaHlkcmFwcEtleXMubGVuZ3RoID4gMSApIHtcbiAgICBsZXQgbGltaXQgPSAwOyAvLyBmb3IgdGVzdHMgdG8gYXZvaWQgbG9vcCBlcnJvclxuXG4gICAgd2hpbGUgKHNldERhdGVLZXkob2Zmc2V0ZWREYXRlKSAhPT0gb2xkZXN0S2V5ICYmIGxpbWl0IDwgNTApIHtcbiAgICAgIG9mZnNldGVkRGF0ZS5zZXREYXRlKCBvZmZzZXRlZERhdGUuZ2V0RGF0ZSgpIC0gMSApO1xuICAgICAgY29uc3QgcHJldkRhdGVLZXkgPSBzZXREYXRlS2V5KG9mZnNldGVkRGF0ZSk7XG4gICAgICBzZXROZXdLZXlWYWx1ZShwcmV2RGF0ZUtleSwgMCk7XG4gICAgICBsaW1pdCsrO1xuICAgIH1cbiAgfVxuICBjb3VudGVyLmlubmVySFRNTCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGRhdGVLZXkpO1xufVxuXG5jb25zdCBzZXRBcmNoaXZlID0gKCkgPT4ge1xuICBjb25zdCBoeWRyYXBwS2V5cyA9IGdldEh5ZHJhcHBLZXlzKCk7XG5cbiAgaWYgKGh5ZHJhcHBLZXlzLmxlbmd0aCA9PT0gMSkge1xuICAgIGFyY2hpdmVMaXN0LmlubmVySFRNTCArPSBgXG4gICAgICA8bGkgY2xhc3M9XCJhcmNoaXZlX19pdGVtIGFyY2hpdmVfX2l0ZW0tLWVtcHR5XCI+Tm8gaGlzdG9yeSB5ZXQuLi48L2xpPlxuICAgICAgYDtcbiAgfSBlbHNlIHtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IGh5ZHJhcHBLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBrZXkgPSBoeWRyYXBwS2V5c1tpXTtcbiAgICAgIGNvbnN0IHZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICAgIGNvbnN0IGRhdGUgPSBrZXlcbiAgICAgICAgLnJlcGxhY2UoJ2h5ZHJBcHAtJywnJylcbiAgICAgICAgLnNwbGl0KCctJylcbiAgICAgICAgLnJldmVyc2UoKVxuICAgICAgICAuam9pbignICcpO1xuICAgICAgY29uc3QgZGF0ZUlEID0gZGF0ZS5yZXBsYWNlKC9cXHMvZywnJyk7XG4gICAgICBcbiAgICAgIGFyY2hpdmVMaXN0LmlubmVySFRNTCArPSBgXG4gICAgICA8bGkgY2xhc3M9XCJhcmNoaXZlX19pdGVtIGFyY2hpdmVfX2l0ZW0tLWpzICR7a2V5fVwiPlxuICAgICAgICA8cCBjbGFzcz1cImFyY2hpdmVfX2RhdGVcIj4ke2RhdGV9PC9wPlxuICAgICAgICA8cCBjbGFzcz1cImFyY2hpdmVfX3ZhbHVlIGFyY2hpdmVfX3ZhbHVlLS1qc1wiPlxuICAgICAgICAgICR7dmFsdWV9XG4gICAgICAgIDwvcD5cbiAgICAgICAgPGRpdiBjbGFzcz1cImVkaXRpb25cIj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGVkaXRpb25fX2VkaXQgZWRpdGlvbl9fZWRpdC0tanNcIj5cbiAgICAgICAgICAgIDxpIGNsYXNzPVwiZWRpdGlvbl9faWNvbiBmYXIgZmEtZWRpdFwiPjwvaT5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZWRpdGlvbl9fZ3JvdXAgZWRpdGlvbl9fZ3JvdXAtLWpzXCI+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGVkaXRpb25fX2RlY3JlYXNlIGVkaXRpb25fX2RlY3JlYXNlLS1qc1wiPlxuICAgICAgICAgICAgICA8aSBjbGFzcz1cImVkaXRpb25fX2ljb24gZmFzIGZhLWNhcmV0LWxlZnRcIj48L2k+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gZWRpdGlvbl9faW5jcmVhc2UgZWRpdGlvbl9faW5jcmVhc2UtLWpzXCI+XG4gICAgICAgICAgICAgIDxpIGNsYXNzPVwiZWRpdGlvbl9faWNvbiBmYXMgZmEtY2FyZXQtcmlnaHRcIj48L2k+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gZWRpdGlvbl9fY2FuY2VsIGVkaXRpb25fX2NhbmNlbC0tanNcIj5cbiAgICAgICAgICAgICAgPGkgY2xhc3M9XCJlZGl0aW9uX19pY29uIGZhcyBmYS11bmRvXCI+PC9pPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGVkaXRpb25fX3NhdmUgZWRpdGlvbl9fc2F2ZS0tanNcIj5cbiAgICAgICAgICAgICAgPGkgY2xhc3M9XCJlZGl0aW9uX19pY29uIGZhciBmYS1zYXZlXCI+PC9pPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiaW5kaWNhdG9yIGluZGljYXRvci0tanMtJHtkYXRlSUR9XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cIiR7YmFzZUNsYXNzbmFtZX1cIj48L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiJHtiYXNlQ2xhc3NuYW1lfVwiPjwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCIke2Jhc2VDbGFzc25hbWV9XCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9saT5cbiAgICAgIGA7XG4gIFxuICAgICAgc2V0SW5kaWNhdG9ycyhkYXRlSUQsIHZhbHVlKTtcbiAgICB9XG4gIH1cbn1cblxuY29uc3Qgc2V0SW5kaWNhdG9ycyA9IChpZCwgdmFsdWUpID0+IHtcbiAgY29uc3QgaW5kaWNhdG9ycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC5pbmRpY2F0b3ItLWpzLSR7aWR9IC5pbmRpY2F0b3JfX3NlY3Rpb24tLWpzYCk7XG5cbiAgaWYgKHZhbHVlID49IDYpIHtcbiAgICBmb3IgKGNvbnN0IGluZGljYXRvciBvZiBpbmRpY2F0b3JzKSB7XG4gICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gaGlnaExldmVsQ2xhc3NuYW1lO1xuICAgIH1cbiAgfSBlbHNlIGlmICh2YWx1ZSA+PSAzKSB7XG4gICAgaW5kaWNhdG9yc1swXS5jbGFzc05hbWUgPSBtZWRpdW1MZXZlbENsYXNzbmFtZTtcbiAgICBpbmRpY2F0b3JzWzFdLmNsYXNzTmFtZSA9IG1lZGl1bUxldmVsQ2xhc3NuYW1lO1xuICAgIGluZGljYXRvcnNbMl0uY2xhc3NOYW1lID0gYmFzZUNsYXNzbmFtZTtcbiAgfSBlbHNlIHtcbiAgICBpbmRpY2F0b3JzWzBdLmNsYXNzTmFtZSA9IGxvd0xldmVsQ2xhc3NuYW1lO1xuICAgIGluZGljYXRvcnNbMV0uY2xhc3NOYW1lID0gYmFzZUNsYXNzbmFtZTtcbiAgICBpbmRpY2F0b3JzWzJdLmNsYXNzTmFtZSA9IGJhc2VDbGFzc25hbWU7XG4gIH1cbn1cblxuY29uc3QgdXBkYXRlQ291bnRlciA9IChlKSA9PiB7XG4gIGNvbnN0IG9mZnNldGVkRGF0ZSA9IGdldE9mZnNldGVkRGF0ZSgpO1xuICBjb25zdCBrZXkgPSBzZXREYXRlS2V5KG9mZnNldGVkRGF0ZSk7XG4gIGNvbnN0IHZhbHVlID0gcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSk7XG4gIGxldCBuZXdWYWx1ZTtcblxuICBpZiAoZS50YXJnZXQgPT09IGFkZEdsYXNzKSB7XG4gICAgdmFsdWUgPCBjb3VudGVyTWF4VmFsdWUgPyBuZXdWYWx1ZSA9IHZhbHVlICsgMSA6IG5ld1ZhbHVlID0gY291bnRlck1heFZhbHVlO1xuICB9IGVsc2UgaWYgKGUudGFyZ2V0ID09PSByZW1vdmVHbGFzcykge1xuICAgIHZhbHVlID4gMCA/IG5ld1ZhbHVlID0gdmFsdWUgLSAxIDogbmV3VmFsdWUgPSAwO1xuICB9XG5cbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBuZXdWYWx1ZSk7XG4gIGNvdW50ZXIuaW5uZXJIVE1MID0gbmV3VmFsdWU7XG4gIFxuICAvLyB1cGRhdGluZyBhcmNoaXZlIG5ld2VzdCBlbnRyeSBpbmRpY2F0b3JcbiAgY29uc3QgZGF0ZUlEID0gb2Zmc2V0ZWREYXRlXG4gICAgLnRvSVNPU3RyaW5nKClcbiAgICAuc2xpY2UoMCwxMClcbiAgICAuc3BsaXQoJy0nKVxuICAgIC5yZXZlcnNlKClcbiAgICAuam9pbignJyk7XG4gIHNldEluZGljYXRvcnMoZGF0ZUlELCBuZXdWYWx1ZSk7XG59XG5cbmNvbnN0IHRvZ2dsZUFyY2hpdmUgPSAoZSkgPT4ge1xuICBjb25zdCBsaXN0SGVpZ2h0ID0gYXJjaGl2ZUxpc3QuY2xpZW50SGVpZ2h0O1xuXG4gIGlmIChhcmNoaXZlLmNsYXNzTGlzdC5jb250YWlucygnYXJjaGl2ZS0tdmlzaWJsZScpKSB7XG4gICAgYXJjaGl2ZS5jbGFzc0xpc3QucmVtb3ZlKCdhcmNoaXZlLS12aXNpYmxlJyk7XG4gICAgYXJjaGl2ZS5zdHlsZS5oZWlnaHQgPSAwO1xuICAgIGUudGFyZ2V0LnRleHRDb250ZW50ID0gXCJTaG93IGFyY2hpdmVcIjtcbiAgfSBlbHNlIHtcbiAgICBhcmNoaXZlLmNsYXNzTGlzdC5hZGQoJ2FyY2hpdmUtLXZpc2libGUnKTtcbiAgICBhcmNoaXZlLnN0eWxlLmhlaWdodCA9IGxpc3RIZWlnaHQgKyBcInB4XCI7XG4gICAgZS50YXJnZXQudGV4dENvbnRlbnQgPSBcIkhpZGUgYXJjaGl2ZVwiO1xuICB9XG59XG5cbmNvbnN0IGhhbmRsZUl0ZW1FZGl0ID0gKGUpID0+IHtcbiAgY29uc3QgaXRlbUluZGV4ID0gZS50YXJnZXQuaW5kZXg7XG4gIGNvbnN0IGFyY2hpdmVJdGVtID0gYXJjaGl2ZUl0ZW1zW2l0ZW1JbmRleF07XG4gIGNvbnN0IGVkaXRCdXR0b24gPSBlZGl0QnV0dG9uc1tpdGVtSW5kZXhdO1xuICBjb25zdCBlZGl0R3JvdXAgPSBlZGl0R3JvdXBzW2l0ZW1JbmRleF07XG4gIGNvbnN0IGRlY3JlYXNlQnV0dG9uID0gZGVjcmVhc2VCdXR0b25zW2l0ZW1JbmRleF07XG4gIGNvbnN0IGluY3JlYXNlQnV0dG9uID0gaW5jcmVhc2VCdXR0b25zW2l0ZW1JbmRleF07XG4gIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGNhbmNlbEJ1dHRvbnNbaXRlbUluZGV4XTtcbiAgY29uc3Qgc2F2ZUJ1dHRvbiA9IHNhdmVCdXR0b25zW2l0ZW1JbmRleF07XG4gIGNvbnN0IGFyY2hpdmVWYWx1ZSA9IGFyY2hpdmVWYWx1ZXNbaXRlbUluZGV4XTtcbiAgY29uc3QgbGFzdFZhbHVlID0gYXJjaGl2ZVZhbHVlLnRleHRDb250ZW50O1xuXG4gIGNvbnN0IGl0ZW1DbGFzc05hbWUgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lO1xuICBjb25zdCBoeWRyQXBwS2V5ID0gaXRlbUNsYXNzTmFtZVxuICAgIC5zcGxpdCgnICcpXG4gICAgLmZpbHRlcihrZXkgPT4gL2h5ZHJBcHAvLnRlc3Qoa2V5KSlcbiAgICAudG9TdHJpbmcoKTtcbiAgY29uc3QgZGF0ZUlEID0gZ2V0RGF0ZUlEKGh5ZHJBcHBLZXkpO1xuXG4gIGNvbnN0IHRvZ2dsZUl0ZW1EaXNwbGF5ID0gKCkgPT4ge1xuICAgIGFyY2hpdmVJdGVtLmNsYXNzTGlzdC50b2dnbGUoJ2FyY2hpdmVfX2l0ZW0tLW9uLXRvcCcpO1xuICAgIGVkaXRCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnZWRpdGlvbl9fZWRpdC0taGlkZGVuJyk7XG4gICAgZWRpdEdyb3VwLmNsYXNzTGlzdC50b2dnbGUoJ2VkaXRpb25fX2dyb3VwLS12aXNpYmxlJyk7XG4gICAgcGFnZU92ZXJsYXkuY2xhc3NMaXN0LnRvZ2dsZSgncGFnZS1vdmVybGF5LS12aXNpYmxlJyk7XG4gIH1cbiAgICBcbiAgY29uc3QgZXhpdEVkaXRNb2RlID0gKCkgPT4ge1xuICAgIHRvZ2dsZUl0ZW1EaXNwbGF5KCk7XG4gICAgY29uc3QgbGFzdFZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oaHlkckFwcEtleSk7XG4gICAgYXJjaGl2ZVZhbHVlLnRleHRDb250ZW50ID0gbGFzdFZhbHVlO1xuICAgIHNldEluZGljYXRvcnMoZGF0ZUlELCBsYXN0VmFsdWUpO1xuICAgIC8vIHJlbW92aW5nIGFsbCBldmVudCBsaXN0ZW5lcnNcbiAgICBjYW5jZWxCdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBleGl0RWRpdE1vZGUpO1xuICAgIHBhZ2VPdmVybGF5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXhpdEVkaXRNb2RlKTtcbiAgICBkZWNyZWFzZUJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHVwZGF0ZVZhbHVlKTtcbiAgICBpbmNyZWFzZUJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHVwZGF0ZVZhbHVlKTtcbiAgICBzYXZlQnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2F2ZVZhbHVlKVxuICB9XG5cbiAgY29uc3QgdXBkYXRlVmFsdWUgPSAoZSkgPT4geyAgIC8vIFpPUFRZTUFMSVpPV0FDIFogVVBEQVRFIENPVU5URVJcbiAgICBsZXQgdmFsdWUgPSBhcmNoaXZlVmFsdWUudGV4dENvbnRlbnQ7XG4gICAgaWYgKGUudGFyZ2V0ID09PSBkZWNyZWFzZUJ1dHRvbikge1xuICAgICAgdmFsdWUgPiAwID8gdmFsdWUtLSA6IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSA8IGNvdW50ZXJNYXhWYWx1ZSA/IHZhbHVlKysgOiBmYWxzZTtcbiAgICB9XG4gICAgYXJjaGl2ZVZhbHVlLnRleHRDb250ZW50ID0gdmFsdWU7XG4gICAgc2V0SW5kaWNhdG9ycyhkYXRlSUQsIHZhbHVlKTtcbiAgfVxuXG4gIGNvbnN0IHNhdmVWYWx1ZSA9ICgpID0+IHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShoeWRyQXBwS2V5LCBhcmNoaXZlVmFsdWUudGV4dENvbnRlbnQpO1xuICAgIGV4aXRFZGl0TW9kZSgpO1xuICB9XG5cbiAgdG9nZ2xlSXRlbURpc3BsYXkoKTtcbiAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXhpdEVkaXRNb2RlKTtcbiAgcGFnZU92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBleGl0RWRpdE1vZGUpO1xuICBkZWNyZWFzZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHVwZGF0ZVZhbHVlKTtcbiAgaW5jcmVhc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB1cGRhdGVWYWx1ZSk7XG4gIHNhdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzYXZlVmFsdWUpO1xufVxuXG5zZXRDb3VudGVyKCk7XG5zZXRBcmNoaXZlKCk7XG5cbmNvbnN0IGFyY2hpdmVJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hcmNoaXZlX19pdGVtLS1qcycpO1xuY29uc3QgZWRpdEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdGlvbl9fZWRpdC0tanMnKTtcbmNvbnN0IGVkaXRHcm91cHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdGlvbl9fZ3JvdXAtLWpzJyk7XG5jb25zdCBkZWNyZWFzZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdGlvbl9fZGVjcmVhc2UtLWpzJyk7XG5jb25zdCBpbmNyZWFzZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdGlvbl9faW5jcmVhc2UtLWpzJyk7XG5jb25zdCBjYW5jZWxCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVkaXRpb25fX2NhbmNlbC0tanMnKTtcbmNvbnN0IHNhdmVCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVkaXRpb25fX3NhdmUtLWpzJyk7XG5jb25zdCBhcmNoaXZlVmFsdWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFyY2hpdmVfX3ZhbHVlLS1qcycpO1xuXG5hZGRHbGFzcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHVwZGF0ZUNvdW50ZXIpO1xucmVtb3ZlR2xhc3MuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB1cGRhdGVDb3VudGVyKTtcbmFyY2hpdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVBcmNoaXZlKTtcblxuZm9yIChsZXQgaSA9IDA7IGkgPCBlZGl0QnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICBjb25zdCBlZGl0QnV0dG9uID0gZWRpdEJ1dHRvbnNbaV07XG4gIGVkaXRCdXR0b24uaW5kZXggPSBpO1xuICBlZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlSXRlbUVkaXQpO1xufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n")}]);