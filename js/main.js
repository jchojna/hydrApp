!function(n){var e={};function t(c){if(e[c])return e[c].exports;var l=e[c]={i:c,l:!1,exports:{}};return n[c].call(l.exports,l,l.exports,t),l.l=!0,l.exports}t.m=n,t.c=e,t.d=function(n,e,c){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:c})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var c=Object.create(null);if(t.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var l in n)t.d(c,l,function(e){return n[e]}.bind(null,l));return c},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=0)}([function(module,exports,__webpack_require__){"use strict";eval("\r\n\r\n/////////////////////////////////////////////////////////////// SERVICE WORKER \r\n\r\nif ('serviceWorker' in navigator) {\r\n  window.addEventListener('load', function() {\r\n    navigator.serviceWorker.register('serviceworker.js').then(function(registration) {\r\n      // Registration was successful\r\n      //console.log('ServiceWorker registration successful with scope: ', registration.scope);\r\n    }, function(err) {\r\n      // registration failed :(\r\n      console.log('ServiceWorker registration failed: ', err);\r\n    });\r\n  });\r\n}\r\n\r\n///////////////////////////////////////////////////////////// GLOBAL VARIABLES \r\n\r\nconst hydrappArray = [];\r\nconst lastEntryDate = new Date();\r\nconst weekDay = ['sunday','monday','tuesday','wednesday','thursday','friday','saturday'];\r\n\r\nlet indicators = '';\r\nfor (let i = 0; i < 8; i++) {\r\n  indicators += `\r\n  <svg class=\"indicator__svg indicator__svg--emo-${i+1} indicator__svg--js-${i}\">\r\n    <use href=\"assets/svg/icons.svg#emoticon-${i}\"></use>\r\n  </svg>`\r\n}\r\n\r\nconst archiveEmpty = `\r\n<p class=\"week__empty\">No history yet...</p>\r\n`;\r\n\r\nconst addButtonHtml = `\r\n<li class=\"entry entry--add entry--js-add\">\r\n  <button class=\"button entry__button entry__button--add entry__button--js-add\">\r\n    Add new day..\r\n  </button>\r\n</li>\r\n`;\r\n\r\nclass Entry {\r\n  constructor(date) {\r\n    this.key = setDateKey(date);\r\n    this.value = this.key;\r\n    this.date = date;\r\n    this.id = this.date;\r\n    this.day = date;\r\n\r\n    this.weekHtml = `\r\n      <section class=\"week week--js\">\r\n        <header class=\"week__header week__header--js\">\r\n          <button class=\"button week__button week__button--prev week__button--js-prev\">\r\n            <svg class=\"week__svg\" viewBox=\"0 0 512 512\">\r\n              <use href=\"assets/svg/icons.svg#left-arrow\"></use>\r\n            </svg>\r\n          </button>\r\n          <h3 class=\"week__heading week__heading--js\">New week</h3>\r\n          <button class=\"button week__button week__button--next week__button--js-next\">\r\n            <svg class=\"week__svg\" viewBox=\"0 0 512 512\">\r\n              <use href=\"assets/svg/icons.svg#right-arrow\"></use>\r\n            </svg>\r\n          </button>\r\n        </header>\r\n        <ul class=\"week__list week__list--js\"></ul>\r\n      </section>\r\n    `;\r\n\r\n    this.dayHtml = `\r\n      <li class=\"entry entry--js ${this.key}\">\r\n        <header class=\"entry__header entry__header--js\">\r\n          <p class=\"entry__heading entry__heading--day\">${this.day}</p>\r\n          <p class=\"entry__heading entry__heading--date entry__heading--js-date\">${this.date}</p>\r\n        </header>\r\n        <span class=\"entry__value entry__value--js\">${this.value}</span>\r\n        <div class=\"edition edition--js\">\r\n          <button class=\"button edition__button edition__button--visible edition__button--edit edition__button--js-edit\">\r\n            <svg class=\"edition__svg edition__svg--edit\">\r\n              <use href=\"assets/svg/icons.svg#edit-mode\"></use>\r\n            </svg>\r\n          </button>\r\n          <button class=\"button edition__button edition__button--decrease edition__button--js-decrease\">\r\n            <svg class=\"edition__svg edition__svg--decrease\">\r\n              <use href=\"assets/svg/icons.svg#down-arrow\"></use>\r\n            </svg>\r\n          </button>\r\n          <button class=\"button edition__button edition__button--increase edition__button--js-increase\">\r\n            <svg class=\"edition__svg edition__svg--increase\">\r\n              <use href=\"assets/svg/icons.svg#up-arrow\"></use>\r\n            </svg>\r\n          </button>\r\n          <button class=\"button edition__button edition__button--cancel edition__button--js-cancel\">\r\n            <svg class=\"edition__svg edition__svg--cancel\">\r\n              <use href=\"assets/svg/icons.svg#back-arrow\"></use>\r\n            </svg>\r\n          </button>\r\n          <button class=\"button edition__button edition__button--save edition__button--js-save\">\r\n            <svg class=\"edition__svg edition__svg--save\">\r\n              <use href=\"assets/svg/icons.svg#save-icon\"></use>\r\n            </svg>\r\n          </button>\r\n        </div>\r\n        <div class=\"indicator indicator--js-${this.id}\">\r\n          ${indicators}\r\n        </div>\r\n      </li>\r\n    `;\r\n  }\r\n\r\n  get value() {\r\n    return this._value;\r\n  }\r\n  set value(key) {\r\n    this._value = localStorage.getItem(key);\r\n  }\r\n  get date() {\r\n    return this._date;\r\n  }\r\n  set date(date) {\r\n    this._date = getOffsetedDate(date).toISOString().slice(0,10).split('-').reverse().join(' ');\r\n  }\r\n  get id() {\r\n    return this._id;\r\n  }\r\n  set id(date) {\r\n    this._id = date.replace(/\\s/g,'');\r\n  }\r\n  get day() {\r\n    return this._day;\r\n  }\r\n  set day(date) {\r\n    const dayIndex = date.getDay();\r\n    this._day = weekDay[dayIndex];\r\n  }\r\n\r\n  /* get totalHeight() {\r\n    return this._totalHeight;\r\n  }\r\n  set totalHeight(amount) {\r\n    this._totalHeight = amount * this.itemHeight;\r\n  } */\r\n}\r\n\r\n//////////////////////////////////////////////////////////////////// FUNCTIONS \r\n\r\n// F0 ////////////////////////////////////////////////////// GET OFFSETED DATE \r\n\r\nconst getOffsetedDate = (obj) => {\r\n  const timeZoneOffset = (new Date()).getTimezoneOffset() * 60000;\r\n  return (new Date(obj - timeZoneOffset));\r\n}\r\n// F0 //////////////////////////////////////////////// CREATE HYDRAPP DATE KEY \r\n\r\nconst setDateKey = (obj) => {\r\n\r\n  const timeZoneOffset = (new Date()).getTimezoneOffset() * 60000;\r\n  let dateObj = obj || new Date();\r\n  dateObj = (new Date(dateObj - timeZoneOffset));\r\n\r\n  const prefix = 'hydrApp-';\r\n  const dateStr = dateObj.toISOString().slice(0,10);\r\n  return prefix.concat(dateStr);\r\n}\r\n// F0 ///////////////////////////// CREATE ARRAY OF HYDRAPP LOCAL STORAGE KEYS \r\n\r\nconst getHydrappKeys = () => {\r\n  const regex = /hydrApp-/;\r\n  return Object\r\n  .keys(localStorage)\r\n  .filter(key => regex.test(key))\r\n  .sort()\r\n  .reverse();\r\n}\r\n// F0 ///////////////////////////////// CREATE KEY VALUE PAIR IN LOCAL STORAGE \r\n\r\nconst setNewKeyValue = (key, value) => {\r\n  if ( !localStorage.getItem(key) ) {\r\n    localStorage.setItem(key, value);\r\n  };\r\n}\r\n// F0 ///////////////////////////////////////////////// LOOPED RANGE OF VALUES \r\n\r\nconst range = (max, num, action) => {\r\n  action === 'increase' ? num >= max ? num = 0 : num++ : false;\r\n  action === 'decrease' ? num <= 0 ? num = max : num-- : false;\r\n  return num;\r\n}\r\n// F0 //////////////////////////////////////////////// LIMITED RANGE OF VALUES \r\n\r\nconst limit = (max, num, action) => {\r\n  action === 'increase' ? num >= max ? false : num++ : false;\r\n  action === 'decrease' ? num <= 0 ? false : num-- : false;\r\n  return num;\r\n}\r\n// F0 ///////////////////////////////////////////////////////// SET INDICATORS \r\n\r\nconst setIndicators = (id, value) => {\r\n\r\n  value > 7 ? value = 7 : false;\r\n\r\n  const indicators = document.querySelector(`.indicator--js-${id}`).children;\r\n  const indicator = document.querySelector(`.indicator--js-${id} .indicator__svg--js-${value}`);\r\n  \r\n  for (const indicator of indicators) {\r\n    indicator.classList.contains('indicator__svg--visible')\r\n    ? indicator.classList.remove('indicator__svg--visible')\r\n    : false;\r\n  }\r\n  indicator.classList.add('indicator__svg--visible');\r\n}\r\n// F0 //////////////////////////////////////////////// CREATE ADD ENTRY BUTTON \r\n\r\nconst createAddEntryButton = () => {\r\n  const addEntryButton = document.createElement('li');\r\n  addEntryButton.className = 'entry entry__add';\r\n  addEntryButton.innerHTML = `\r\n    <button class=\"button entry__button entry__button--add entry__button--js-add\">\r\n      Add new day..\r\n    </button>\r\n  `;\r\n  addEntryButton.addEventListener('click', enterNewEntryValue);\r\n\r\n  return addEntryButton;\r\n}\r\n// F0 //////////////////////////////////////////// CREATE 'REMOVE ITEM' BUTTON \r\n\r\nconst createRemoveEntryButton = () => {\r\n\r\n  const removeEntryButton = document.createElement('button');\r\n  removeEntryButton.className = 'button entry__remove';\r\n  removeEntryButton.innerHTML = `\r\n    <svg class=\"entry__svg\" viewBox=\"0 0 512 512\">\r\n      <use href=\"assets/svg/icons.svg#remove-icon\"></use>\r\n    </svg>\r\n  `\r\n  removeEntryButton.addEventListener('click', removeLastEntry);\r\n\r\n  return removeEntryButton;\r\n}\r\n// F2 ////////////////////////////////////////////////////// SET LOCAL STORAGE \r\n\r\nconst handleData = () => {\r\n\r\n  const date = new Date();\r\n  let dateKey = setDateKey(date);\r\n  setNewKeyValue(dateKey, 0);\r\n  let hydrappKeys = getHydrappKeys();\r\n  const oldestKey = hydrappKeys[hydrappKeys.length - 1];\r\n  \r\n  // create object for each key\r\n  const createEntryObject = (date) => {\r\n    const newEntry = new Entry(date);\r\n    hydrappArray.push(newEntry);\r\n  }\r\n  // first object of array\r\n  createEntryObject(date);\r\n\r\n  // autocomplete the rest of keys if needed\r\n  while (dateKey !== oldestKey) {\r\n    dateKey = setDateKey(date.setDate(date.getDate() - 1));\r\n    lastEntryDate.setDate(lastEntryDate.getDate() - 1);\r\n    setNewKeyValue(dateKey, 0);\r\n    createEntryObject(date);\r\n  }\r\n  //counter.innerHTML = localStorage.getItem(dateKey);\r\n  updateCounter('displayValue');\r\n}\r\n// F1 ///////////////////////////////////////////////////////// UPDATE COUNTER \r\n\r\nconst updateCounter = (e) => {\r\n  const self = e.target || e;\r\n  const key = setDateKey();\r\n  let value = parseInt(localStorage.getItem(key));\r\n\r\n  switch (self) {\r\n    case 'displayValue':\r\n      counter.innerHTML = value;\r\n      break;\r\n    \r\n    case addGlass:\r\n      value < counterMaxValue ? value++ : value = counterMaxValue;\r\n      localStorage.setItem(key, value);\r\n      hydrappArray[0].value = value;\r\n      counter.innerHTML = value;\r\n      break;\r\n\r\n    case removeGlass:\r\n      value > 0 ? value-- : value = 0;\r\n      localStorage.setItem(key, value);\r\n      hydrappArray[0].value = value;\r\n      counter.innerHTML = value;\r\n      break;\r\n  }\r\n}\r\n// F2 /////////////////////////////////////////////////////// ADD ARCHIVE NODE \r\n\r\nconst addArchiveNode = (index, option) => {\r\n\r\n  const {value, id, day, dayHtml, weekHtml} = hydrappArray[index];\r\n  \r\n  // add new week\r\n  if (((day === 'sunday' || index === 0)) && option !== 'add') {\r\n\r\n    archiveWeeks.insertAdjacentHTML('beforeend', weekHtml);                // ! TO REFACTOR\r\n    const weekHeader = archiveWeeks.lastElementChild.firstElementChild;\r\n    weekHeader.addEventListener('click', slideWeek);\r\n  }\r\n  // add next day entry\r\n  let lastWeekList = archiveWeeks.lastElementChild.lastElementChild;\r\n  lastWeekList.insertAdjacentHTML('beforeend', dayHtml);\r\n  setIndicators(id, value);\r\n\r\n  // add 'add entry button at the end\r\n  if (index === hydrappArray.length - 1) {\r\n    if (day === 'monday') {\r\n      archiveWeeks.insertAdjacentHTML(\"beforeend\", weekHtml);              // ! TO REFACTOR\r\n      const weekHeader = archiveWeeks.lastElementChild.firstElementChild;\r\n      weekHeader.addEventListener('click', slideWeek);\r\n    };\r\n\r\n    lastWeekList = archiveWeeks.lastElementChild.lastElementChild;\r\n    lastWeekList.appendChild(addEntryButton);\r\n  }\r\n  updateWeekHeading();\r\n\r\n  // add event listeners to all edit buttons\r\n  const editButton = document.querySelectorAll('.edition__button--js-edit')[index];\r\n  editButton.index = index;\r\n  editButton.addEventListener('click', handleItemEdit);\r\n}\r\n// F2 //////////////////////////////////////////////////////////// SET ARCHIVE \r\n\r\nconst setArchiveDOM = () => {\r\n  \r\n  for (let i = 0; i < hydrappArray.length; i++) {\r\n    addArchiveNode(i);\r\n  }\r\n  // set the newest week as visible\r\n  const weeks = document.querySelectorAll('.week--js');\r\n  weeks[currentWeekIndex].classList.add('week--visible');\r\n  // set 'remove entry' button on the last entry\r\n  handleArchiveLastEntry();\r\n}\r\n// F2 /////////////////////////////////////////////////////// SET WEEK HEADING \r\n\r\nconst updateWeekHeading = () => {\r\n\r\n  const weekLists = document.querySelectorAll('.week__list--js');\r\n  const weekHeadings = document.querySelectorAll('.week__heading--js');\r\n\r\n  const getDate = (element) => {\r\n\r\n    if (element) {\r\n      const filtered = element.className.split(' ').filter(a => /hydrApp/.test(a));\r\n      return filtered.toString().slice(10).split('-').reverse().join('.');\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  const setButtonsVisiblity = (index, option) => {\r\n    const prevWeekButton = document.querySelectorAll('.week__button--js-prev')[index];\r\n    const nextWeekButton = document.querySelectorAll('.week__button--js-next')[index];\r\n\r\n    switch (index) {\r\n\r\n      case 0:\r\n        prevWeekButton.classList.remove('week__button--visible');\r\n        option === 'oneWeek'\r\n        ? nextWeekButton.classList.remove('week__button--visible')\r\n        : nextWeekButton.classList.add('week__button--visible');\r\n        break;\r\n      \r\n      case weekHeadings.length - 1:\r\n        prevWeekButton.classList.add('week__button--visible');\r\n        nextWeekButton.classList.remove('week__button--visible');\r\n        break;\r\n\r\n      default:\r\n        prevWeekButton.classList.add('week__button--visible');\r\n        nextWeekButton.classList.add('week__button--visible');\r\n        break;\r\n    }\r\n  }\r\n  \r\n  for (let i = 0; i < weekLists.length; i++) {\r\n\r\n    const entries = weekLists[i].querySelectorAll('.entry--js');\r\n    const startDate = getDate(entries[entries.length - 1]);\r\n    const endDate = getDate(entries[0]);\r\n    const heading = weekHeadings[i];\r\n\r\n    heading.textContent = `${startDate\r\n    ? (startDate === endDate ? startDate : `${startDate.slice(0,5)} - ${endDate}`)\r\n    : `New Week`}`;\r\n\r\n    weekLists.length > 1 ? setButtonsVisiblity(i) : setButtonsVisiblity(i, 'oneWeek');\r\n  }\r\n}\r\n// F1 /////////////////////////////////////////////////////////// SHOW ARCHIVE \r\n\r\nconst showArchive = () => {\r\n\r\n  entries = document.querySelectorAll('.entry--js');\r\n\r\n  if (archive.classList.contains('archive--visible')) {\r\n    archive.classList.remove('archive--visible')\r\n    window.removeEventListener('keydown', enterNewEntryValue);\r\n    window.removeEventListener('keydown', removeLastEntry);\r\n    window.removeEventListener('keydown', slideWeek);\r\n\r\n  } else {\r\n\r\n    archive.classList.add('archive--visible');\r\n    window.addEventListener('keydown', enterNewEntryValue);\r\n    window.addEventListener('keydown', removeLastEntry);\r\n    window.addEventListener('keydown', slideWeek);\r\n  }\r\n}\r\n// F2 ///////////////////////////////////////////////////////////// SLIDE WEEK \r\n\r\nconst slideWeek = (e) => {\r\n\r\n  const self = e.keyCode || e.target;\r\n  const prevWeekButton = document.querySelectorAll('.week__button--js-prev')[currentWeekIndex];\r\n  const nextWeekButton = document.querySelectorAll('.week__button--js-next')[currentWeekIndex];\r\n  const weeksAmount = archiveWeeks.children.length;\r\n\r\n  const handleSlide = (direction) => {\r\n    // handle previous section\r\n    archiveWeeks.children[currentWeekIndex].className = `week week--js week--slide-out-to-${direction === 'toLeft' ? `right` : `left`}`;\r\n    const previousWeekIndex = currentWeekIndex;\r\n    // change index\r\n    currentWeekIndex = limit(archiveWeeks.children.length - 1, currentWeekIndex, direction === 'toLeft' ? `decrease` : `increase`);\r\n    // handle next section\r\n    if (currentWeekIndex !== previousWeekIndex) {\r\n      archiveWeeks.children[currentWeekIndex].classList = `week week--js week--visible week--slide-in-from-${direction === 'toLeft' ? `left` : `right`}`;\r\n    } else {\r\n      archiveWeeks.children[currentWeekIndex].classList = 'week week--js week--visible';\r\n    }\r\n  }\r\n\r\n  if (weeksAmount > 1) {\r\n    switch (self) {\r\n      case 37:\r\n      case prevWeekButton:\r\n        handleSlide('toLeft');\r\n        break;\r\n      case 39:\r\n      case nextWeekButton:\r\n        handleSlide('toRight');\r\n        break;\r\n    }\r\n  }\r\n}\r\n// F1 ////////////////////////////////////////// ARCHIVE MODAL << SHOW ARCHIVE \r\n\r\nconst enterNewEntryValue = (e) => {\r\n\r\n  const self = e.keyCode || e.target;\r\n  const addEntryButton = document.querySelector('.entry__button--js-add');\r\n\r\n  if (self === 107 || self === addEntryButton) {\r\n\r\n    let value = 0;\r\n    newEntryMode.classList.add('new-entry--visible');\r\n    newEntryValue.textContent = value;\r\n  \r\n    const modeOff = () => {\r\n      newEntryMode.classList.remove('new-entry--visible');\r\n      newEntryMode.removeEventListener('click', handleValue);\r\n      window.removeEventListener('keydown', handleValue);\r\n      window.addEventListener('keydown', enterNewEntryValue);\r\n      window.addEventListener('keydown', slideWeek);\r\n    }\r\n  \r\n    const handleValue = (e) => {\r\n  \r\n      const self = e.keyCode || e.target;\r\n  \r\n      switch (self) {\r\n  \r\n        case 37:\r\n        case newEntryDecrease:\r\n          value !== 0 ? value-- : false;\r\n          newEntryValue.textContent = value;\r\n          break;\r\n\r\n        case 39:\r\n        case newEntryIncrease:\r\n          value !== counterMaxValue ? value++ : false;\r\n          newEntryValue.textContent = value;\r\n          break;\r\n  \r\n        case 27:\r\n        case newEntryCancel:\r\n          modeOff();\r\n          break;\r\n  \r\n        case 13:\r\n        case newEntrySave:\r\n          addNewEntry(e, value);\r\n          modeOff();\r\n          break;\r\n      }\r\n    }\r\n    newEntryMode.addEventListener('click', handleValue);\r\n    window.addEventListener('keydown', handleValue);\r\n    window.removeEventListener('keydown', enterNewEntryValue);\r\n    window.removeEventListener('keydown', slideWeek);\r\n  }\r\n}\r\n// F1 /////////////////////////////////////////// ADD NEW ITEM << SHOW ARCHIVE \r\n\r\nconst addNewEntry = (e, value) => {\r\n  \r\n  const self = e.keyCode || e.target;\r\n\r\n  if (self === 13 || self === newEntrySave) {\r\n\r\n    let lastEntryIndex = hydrappArray.length - 1;\r\n    const lastEntry = document.querySelectorAll('.entry--js')[lastEntryIndex];\r\n    lastEntry.classList.remove('entry--last');\r\n\r\n    lastEntryDate.setDate(lastEntryDate.getDate() - 1);\r\n    const newEntryKey = setDateKey(lastEntryDate);\r\n    \r\n    // handle local storage and array of objects\r\n    setNewKeyValue(newEntryKey, value);\r\n    const newEntry = new Entry(lastEntryDate);\r\n    newEntry.value = newEntryKey;\r\n    hydrappArray.push(newEntry);\r\n\r\n    // create new entry node\r\n    lastEntryIndex = hydrappArray.length - 1;\r\n    addArchiveNode(lastEntryIndex, 'add');\r\n\r\n    // jump to the last week\r\n    const weeks = archiveWeeks.children;\r\n    const currentWeek = weeks[currentWeekIndex];\r\n    const lastWeekIndex = weeks.length - 1;\r\n    const lastWeek = weeks[lastWeekIndex];\r\n    if (currentWeekIndex !== lastWeekIndex) {\r\n      currentWeekIndex = archiveWeeks.children.length - 1;\r\n      currentWeek.className = 'week week--js week--slide-out-to-left';\r\n      lastWeek.className = 'week week--js week--visible week--slide-in-from-right';\r\n    }\r\n    handleArchiveLastEntry();\r\n  }\r\n}\r\n// F1 /////////////////////////////////////////////// ADJUST LAST ITEM OF LIST \r\n\r\nconst handleArchiveLastEntry = () => {\r\n\r\n  const entries = document.querySelectorAll('.entry--js');\r\n  const lastEntry = entries[entries.length - 1];\r\n  const lastEntryValueNode = lastEntry.querySelector('.entry__value--js');\r\n\r\n  if (entries.length > 1) {\r\n    lastEntry.insertBefore(removeEntryButton, lastEntryValueNode);\r\n    lastEntry.classList.add('entry--last');\r\n  }\r\n}\r\n// F1 /////////////////////////////////////// REMOVE LAST ITEM << SHOW ARCHIVE \r\n\r\nconst removeLastEntry = (e) => {\r\n\r\n  const self = e.keyCode || e. target;\r\n  const lastEntryIndex = hydrappArray.length - 1;\r\n  const {day, key} = hydrappArray[lastEntryIndex];\r\n  const lastEntryNode = document.querySelectorAll('.entry--js')[lastEntryIndex];\r\n\r\n  if (self === 109 || self === removeEntryButton) {\r\n\r\n    if (hydrappArray.length > 1) {\r\n\r\n      hydrappArray.pop();\r\n      localStorage.removeItem(key);\r\n      lastEntryDate.setDate(lastEntryDate.getDate() + 1);\r\n      lastEntryNode.parentNode.removeChild(lastEntryNode);\r\n\r\n      // removing last week section after deleting last day of that week\r\n      if (day === 'monday') {\r\n        const weekToRemove = archiveWeeks.lastElementChild;\r\n        const ifVisible = weekToRemove.classList.contains('week--visible');\r\n        archiveWeeks.removeChild(archiveWeeks.lastElementChild);\r\n        const lastWeek = archiveWeeks.lastElementChild;\r\n        const lastWeekList = lastWeek.lastElementChild;\r\n        if (ifVisible) {\r\n          lastWeek.className = 'week week--js week--visible week--slide-in-from-left';currentWeekIndex--;\r\n        }\r\n        lastWeekList.appendChild(addEntryButton);\r\n      }\r\n\r\n      // add remove button on current last item\r\n      handleArchiveLastEntry();\r\n      updateWeekHeading();\r\n    } else {\r\n\r\n    }\r\n  }\r\n}\r\n// F2 /////////////////////////////////////////////////////// HANDLE ITEM EDIT \r\n\r\nconst handleItemEdit = (e) => {\r\n  const itemIndex = e.target.index;\r\n\r\n  const entry = document.querySelectorAll('.entry--js')[itemIndex];\r\n  const entryHeader = document.querySelectorAll('.entry__header--js')[itemIndex];\r\n  const entryValue = document.querySelectorAll('.entry__value--js')[itemIndex];\r\n  const editSection = document.querySelectorAll('.edition--js')[itemIndex];\r\n  const decreaseButton = document.querySelectorAll('.edition__button--js-decrease')[itemIndex];\r\n  const increaseButton = document.querySelectorAll('.edition__button--js-increase')[itemIndex];\r\n  const cancelButton = document.querySelectorAll('.edition__button--js-cancel')[itemIndex];\r\n  const saveButton = document.querySelectorAll('.edition__button--js-save')[itemIndex];\r\n\r\n  // F0 ////////////////////////////// TOGGLE ITEM DISPLAY << HANDLE ITEM EDIT \r\n\r\n  const toggleItemDisplay = () => {\r\n\r\n    for (const editButton of editSection.children) {\r\n      editButton.classList.toggle('edition__button--visible');\r\n    }\r\n    editSection.classList.toggle('edition--visible');\r\n    entry.classList.toggle('entry--edit-mode');\r\n    entryHeader.classList.toggle('entry__header--edit-mode');\r\n\r\n    itemIndex === hydrappArray.length - 1\r\n    ? removeEntryButton.classList.toggle('entry__remove--hidden')\r\n    : false;\r\n  }\r\n  // F1 /////////////////////////////////// EXIT EDIT MODE << HANDLE ITEM EDIT \r\n\r\n  const exitEditMode = () => {\r\n    const {value, id} = hydrappArray[itemIndex];\r\n    \r\n    toggleItemDisplay();\r\n    entryValue.textContent = value;\r\n    setIndicators(id, value);\r\n\r\n    archive.removeEventListener('click', handleEdition);\r\n    archive.removeEventListener('keydown', handleEdition);\r\n    window.addEventListener('keydown', slideWeek);\r\n  }\r\n  // F1 /////////////////////////////////// HANDLE EDITION << HANDLE ITEM EDIT \r\n\r\n  const handleEdition = (e) => {\r\n    const self = e.keyCode || e.target;\r\n    let dayValue = parseInt(entryValue.textContent);\r\n\r\n    const {key, id} = hydrappArray[itemIndex];\r\n\r\n    switch (self) {\r\n\r\n      case 40:\r\n      case decreaseButton:\r\n        e.preventDefault();\r\n        dayValue > 0 ? dayValue-- : false;\r\n        entryValue.textContent = dayValue;\r\n        setIndicators(id, dayValue);\r\n      break;\r\n      \r\n      case 38:\r\n      case increaseButton:\r\n        e.preventDefault();\r\n        dayValue < counterMaxValue ? dayValue++ : false;\r\n        entryValue.textContent = dayValue;\r\n        setIndicators(id, dayValue);\r\n      break;\r\n\r\n      case 27:\r\n      case archiveOverlay:\r\n      case cancelButton:\r\n        e.preventDefault();\r\n        exitEditMode();\r\n      break;\r\n\r\n      case 13:\r\n      case saveButton:\r\n        e.preventDefault();\r\n        localStorage.setItem(key, dayValue);\r\n        // setter function\r\n        hydrappArray[itemIndex].value = key;\r\n        exitEditMode();\r\n      break;\r\n    }\r\n  }\r\n  ///////////////////////////////////////// FUNCTION CALLS << HANDLE ITEM EDIT \r\n\r\n  toggleItemDisplay();\r\n  archive.addEventListener('click', handleEdition);\r\n  archive.addEventListener('keydown', handleEdition);\r\n  window.removeEventListener('keydown', slideWeek);\r\n\r\n}\r\n// F2 //////////////////////////////////////////////// END OF HANDLE ITEM EDIT \r\n\r\n/*\r\n##     ##    ###    ########  ####    ###    ########  ##       ########  ######\r\n##     ##   ## ##   ##     ##  ##    ## ##   ##     ## ##       ##       ##    ##\r\n##     ##  ##   ##  ##     ##  ##   ##   ##  ##     ## ##       ##       ##\r\n##     ## ##     ## ########   ##  ##     ## ########  ##       ######    ######\r\n ##   ##  ######### ##   ##    ##  ######### ##     ## ##       ##             ##\r\n  ## ##   ##     ## ##    ##   ##  ##     ## ##     ## ##       ##       ##    ##\r\n   ###    ##     ## ##     ## #### ##     ## ########  ######## ########  ######\r\n*/\r\n\r\n//////////////////////////////////////////////////////////////////// VARIABLES \r\n// APP\r\nconst appContainer = document.querySelector('.app__container--js');\r\nconst addGlass = document.querySelector('.app__button--js-add');\r\nconst removeGlass = document.querySelector('.app__button--js-remove');\r\nconst counter = document.querySelector('.glass__counter--js');\r\nconst counterMaxValue = 99;\r\n// ARCHIVE\r\nconst archive = document.querySelector('.archive--js');\r\nconst archiveOverlay = document.querySelector('.archive__overlay--js');\r\nconst archiveWeeks = document.querySelector('.archive__weeks--js');\r\nconst archiveButton = document.querySelector('.navigation__button--js-archive');\r\nconst prevWeekButton = document.querySelector('.archive__button--js-prev');\r\nconst nextWeekButton = document.querySelector('.archive__button--js-next');\r\nconst addEntryButton = createAddEntryButton();\r\nconst removeEntryButton = createRemoveEntryButton();\r\nlet currentWeekIndex = 0;\r\n// NEW ENTRY\r\nconst newEntryMode = document.querySelector('.new-entry--js');\r\nconst newEntryValue = document.querySelector('.new-entry__value--js');\r\nconst newEntryDecrease = document.querySelector('.new-entry__button--js-decrease');\r\nconst newEntryIncrease = document.querySelector('.new-entry__button--js-increase');\r\nconst newEntryCancel = document.querySelector('.new-entry__button--js-cancel');\r\nconst newEntrySave = document.querySelector('.new-entry__button--js-save');\r\n// STATS\r\nconst statsButton = document.querySelector('.navigation__button--js-stats');\r\n\r\n/////////////////////////////////////////////////////////////// FUNCTION CALLS \r\n\r\nhandleData();\r\nsetArchiveDOM();\r\nupdateWeekHeading();\r\n\r\n//////////////////////////////////////////////////////////////////// VARIABLES \r\n\r\nlet editButtons = document.querySelectorAll('.edition__button--js-edit');\r\nlet entries = document.querySelectorAll('.entry--js');\r\nconst addNewDayButton = document.querySelector('.entry__button--js-add');\r\n\r\n////////////////////////////////////////////////////////////// EVENT LISTENERS \r\n\r\nshowArchive();  // ! for tests\r\n\r\nappContainer.addEventListener('click', updateCounter);\r\narchiveButton.addEventListener('click', showArchive);\r\n//loadMoreButton.addEventListener('click', loadMoreItems);\r\n\r\n/* for (let i = 0; i < editButtons.length; i++) {\r\n  const editButton = editButtons[i];\r\n  editButton.index = i;\r\n  editButton.addEventListener('click', handleItemEdit);\r\n} *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFpbi5qcz85MjkxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCO0FBQ0EsbURBQW1ELElBQUksc0JBQXNCLEVBQUU7QUFDL0UsK0NBQStDLEVBQUU7QUFDakQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbUNBQW1DLFNBQVM7QUFDNUM7QUFDQSwwREFBMEQsU0FBUztBQUNuRSxtRkFBbUYsVUFBVTtBQUM3RjtBQUNBLHNEQUFzRCxXQUFXO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxRQUFRO0FBQ3RELFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLDhEQUE4RCxHQUFHO0FBQ2pFLDZEQUE2RCxHQUFHLHVCQUF1QixNQUFNOztBQUU3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsU0FBUyxrQ0FBa0M7O0FBRTNDO0FBQ0E7O0FBRUEsMkRBQTJEO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RDtBQUM3RDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLGlCQUFpQix5QkFBeUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUIsc0JBQXNCOztBQUV2QztBQUNBO0FBQ0E7QUFDQTs7QUFFQSw2QkFBNkI7QUFDN0IsOENBQThDLHFCQUFxQixLQUFLLFFBQVE7QUFDaEYsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDRGQUE0RiwwQ0FBMEM7QUFDdEk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZHQUE2RywwQ0FBMEM7QUFDdkosS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUyxTQUFTO0FBQ2xCOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRkFBc0Y7QUFDdEY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsV0FBVyxVQUFVOztBQUVyQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsV0FBVyxRQUFROztBQUVuQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsY0FBYzs7QUFFZDtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCLHdCQUF3QjtBQUMxQztBQUNBO0FBQ0E7QUFDQSxDQUFDIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBTRVJWSUNFIFdPUktFUiBcclxuXHJcbmlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7XHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKCdzZXJ2aWNld29ya2VyLmpzJykudGhlbihmdW5jdGlvbihyZWdpc3RyYXRpb24pIHtcclxuICAgICAgLy8gUmVnaXN0cmF0aW9uIHdhcyBzdWNjZXNzZnVsXHJcbiAgICAgIC8vY29uc29sZS5sb2coJ1NlcnZpY2VXb3JrZXIgcmVnaXN0cmF0aW9uIHN1Y2Nlc3NmdWwgd2l0aCBzY29wZTogJywgcmVnaXN0cmF0aW9uLnNjb3BlKTtcclxuICAgIH0sIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAvLyByZWdpc3RyYXRpb24gZmFpbGVkIDooXHJcbiAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aWNlV29ya2VyIHJlZ2lzdHJhdGlvbiBmYWlsZWQ6ICcsIGVycik7XHJcbiAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBHTE9CQUwgVkFSSUFCTEVTIFxyXG5cclxuY29uc3QgaHlkcmFwcEFycmF5ID0gW107XHJcbmNvbnN0IGxhc3RFbnRyeURhdGUgPSBuZXcgRGF0ZSgpO1xyXG5jb25zdCB3ZWVrRGF5ID0gWydzdW5kYXknLCdtb25kYXknLCd0dWVzZGF5Jywnd2VkbmVzZGF5JywndGh1cnNkYXknLCdmcmlkYXknLCdzYXR1cmRheSddO1xyXG5cclxubGV0IGluZGljYXRvcnMgPSAnJztcclxuZm9yIChsZXQgaSA9IDA7IGkgPCA4OyBpKyspIHtcclxuICBpbmRpY2F0b3JzICs9IGBcclxuICA8c3ZnIGNsYXNzPVwiaW5kaWNhdG9yX19zdmcgaW5kaWNhdG9yX19zdmctLWVtby0ke2krMX0gaW5kaWNhdG9yX19zdmctLWpzLSR7aX1cIj5cclxuICAgIDx1c2UgaHJlZj1cImFzc2V0cy9zdmcvaWNvbnMuc3ZnI2Vtb3RpY29uLSR7aX1cIj48L3VzZT5cclxuICA8L3N2Zz5gXHJcbn1cclxuXHJcbmNvbnN0IGFyY2hpdmVFbXB0eSA9IGBcclxuPHAgY2xhc3M9XCJ3ZWVrX19lbXB0eVwiPk5vIGhpc3RvcnkgeWV0Li4uPC9wPlxyXG5gO1xyXG5cclxuY29uc3QgYWRkQnV0dG9uSHRtbCA9IGBcclxuPGxpIGNsYXNzPVwiZW50cnkgZW50cnktLWFkZCBlbnRyeS0tanMtYWRkXCI+XHJcbiAgPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBlbnRyeV9fYnV0dG9uIGVudHJ5X19idXR0b24tLWFkZCBlbnRyeV9fYnV0dG9uLS1qcy1hZGRcIj5cclxuICAgIEFkZCBuZXcgZGF5Li5cclxuICA8L2J1dHRvbj5cclxuPC9saT5cclxuYDtcclxuXHJcbmNsYXNzIEVudHJ5IHtcclxuICBjb25zdHJ1Y3RvcihkYXRlKSB7XHJcbiAgICB0aGlzLmtleSA9IHNldERhdGVLZXkoZGF0ZSk7XHJcbiAgICB0aGlzLnZhbHVlID0gdGhpcy5rZXk7XHJcbiAgICB0aGlzLmRhdGUgPSBkYXRlO1xyXG4gICAgdGhpcy5pZCA9IHRoaXMuZGF0ZTtcclxuICAgIHRoaXMuZGF5ID0gZGF0ZTtcclxuXHJcbiAgICB0aGlzLndlZWtIdG1sID0gYFxyXG4gICAgICA8c2VjdGlvbiBjbGFzcz1cIndlZWsgd2Vlay0tanNcIj5cclxuICAgICAgICA8aGVhZGVyIGNsYXNzPVwid2Vla19faGVhZGVyIHdlZWtfX2hlYWRlci0tanNcIj5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gd2Vla19fYnV0dG9uIHdlZWtfX2J1dHRvbi0tcHJldiB3ZWVrX19idXR0b24tLWpzLXByZXZcIj5cclxuICAgICAgICAgICAgPHN2ZyBjbGFzcz1cIndlZWtfX3N2Z1wiIHZpZXdCb3g9XCIwIDAgNTEyIDUxMlwiPlxyXG4gICAgICAgICAgICAgIDx1c2UgaHJlZj1cImFzc2V0cy9zdmcvaWNvbnMuc3ZnI2xlZnQtYXJyb3dcIj48L3VzZT5cclxuICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDxoMyBjbGFzcz1cIndlZWtfX2hlYWRpbmcgd2Vla19faGVhZGluZy0tanNcIj5OZXcgd2VlazwvaDM+XHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIHdlZWtfX2J1dHRvbiB3ZWVrX19idXR0b24tLW5leHQgd2Vla19fYnV0dG9uLS1qcy1uZXh0XCI+XHJcbiAgICAgICAgICAgIDxzdmcgY2xhc3M9XCJ3ZWVrX19zdmdcIiB2aWV3Qm94PVwiMCAwIDUxMiA1MTJcIj5cclxuICAgICAgICAgICAgICA8dXNlIGhyZWY9XCJhc3NldHMvc3ZnL2ljb25zLnN2ZyNyaWdodC1hcnJvd1wiPjwvdXNlPlxyXG4gICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgIDwvaGVhZGVyPlxyXG4gICAgICAgIDx1bCBjbGFzcz1cIndlZWtfX2xpc3Qgd2Vla19fbGlzdC0tanNcIj48L3VsPlxyXG4gICAgICA8L3NlY3Rpb24+XHJcbiAgICBgO1xyXG5cclxuICAgIHRoaXMuZGF5SHRtbCA9IGBcclxuICAgICAgPGxpIGNsYXNzPVwiZW50cnkgZW50cnktLWpzICR7dGhpcy5rZXl9XCI+XHJcbiAgICAgICAgPGhlYWRlciBjbGFzcz1cImVudHJ5X19oZWFkZXIgZW50cnlfX2hlYWRlci0tanNcIj5cclxuICAgICAgICAgIDxwIGNsYXNzPVwiZW50cnlfX2hlYWRpbmcgZW50cnlfX2hlYWRpbmctLWRheVwiPiR7dGhpcy5kYXl9PC9wPlxyXG4gICAgICAgICAgPHAgY2xhc3M9XCJlbnRyeV9faGVhZGluZyBlbnRyeV9faGVhZGluZy0tZGF0ZSBlbnRyeV9faGVhZGluZy0tanMtZGF0ZVwiPiR7dGhpcy5kYXRlfTwvcD5cclxuICAgICAgICA8L2hlYWRlcj5cclxuICAgICAgICA8c3BhbiBjbGFzcz1cImVudHJ5X192YWx1ZSBlbnRyeV9fdmFsdWUtLWpzXCI+JHt0aGlzLnZhbHVlfTwvc3Bhbj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZWRpdGlvbiBlZGl0aW9uLS1qc1wiPlxyXG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBlZGl0aW9uX19idXR0b24gZWRpdGlvbl9fYnV0dG9uLS12aXNpYmxlIGVkaXRpb25fX2J1dHRvbi0tZWRpdCBlZGl0aW9uX19idXR0b24tLWpzLWVkaXRcIj5cclxuICAgICAgICAgICAgPHN2ZyBjbGFzcz1cImVkaXRpb25fX3N2ZyBlZGl0aW9uX19zdmctLWVkaXRcIj5cclxuICAgICAgICAgICAgICA8dXNlIGhyZWY9XCJhc3NldHMvc3ZnL2ljb25zLnN2ZyNlZGl0LW1vZGVcIj48L3VzZT5cclxuICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gZWRpdGlvbl9fYnV0dG9uIGVkaXRpb25fX2J1dHRvbi0tZGVjcmVhc2UgZWRpdGlvbl9fYnV0dG9uLS1qcy1kZWNyZWFzZVwiPlxyXG4gICAgICAgICAgICA8c3ZnIGNsYXNzPVwiZWRpdGlvbl9fc3ZnIGVkaXRpb25fX3N2Zy0tZGVjcmVhc2VcIj5cclxuICAgICAgICAgICAgICA8dXNlIGhyZWY9XCJhc3NldHMvc3ZnL2ljb25zLnN2ZyNkb3duLWFycm93XCI+PC91c2U+XHJcbiAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGVkaXRpb25fX2J1dHRvbiBlZGl0aW9uX19idXR0b24tLWluY3JlYXNlIGVkaXRpb25fX2J1dHRvbi0tanMtaW5jcmVhc2VcIj5cclxuICAgICAgICAgICAgPHN2ZyBjbGFzcz1cImVkaXRpb25fX3N2ZyBlZGl0aW9uX19zdmctLWluY3JlYXNlXCI+XHJcbiAgICAgICAgICAgICAgPHVzZSBocmVmPVwiYXNzZXRzL3N2Zy9pY29ucy5zdmcjdXAtYXJyb3dcIj48L3VzZT5cclxuICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gZWRpdGlvbl9fYnV0dG9uIGVkaXRpb25fX2J1dHRvbi0tY2FuY2VsIGVkaXRpb25fX2J1dHRvbi0tanMtY2FuY2VsXCI+XHJcbiAgICAgICAgICAgIDxzdmcgY2xhc3M9XCJlZGl0aW9uX19zdmcgZWRpdGlvbl9fc3ZnLS1jYW5jZWxcIj5cclxuICAgICAgICAgICAgICA8dXNlIGhyZWY9XCJhc3NldHMvc3ZnL2ljb25zLnN2ZyNiYWNrLWFycm93XCI+PC91c2U+XHJcbiAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGVkaXRpb25fX2J1dHRvbiBlZGl0aW9uX19idXR0b24tLXNhdmUgZWRpdGlvbl9fYnV0dG9uLS1qcy1zYXZlXCI+XHJcbiAgICAgICAgICAgIDxzdmcgY2xhc3M9XCJlZGl0aW9uX19zdmcgZWRpdGlvbl9fc3ZnLS1zYXZlXCI+XHJcbiAgICAgICAgICAgICAgPHVzZSBocmVmPVwiYXNzZXRzL3N2Zy9pY29ucy5zdmcjc2F2ZS1pY29uXCI+PC91c2U+XHJcbiAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImluZGljYXRvciBpbmRpY2F0b3ItLWpzLSR7dGhpcy5pZH1cIj5cclxuICAgICAgICAgICR7aW5kaWNhdG9yc31cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9saT5cclxuICAgIGA7XHJcbiAgfVxyXG5cclxuICBnZXQgdmFsdWUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fdmFsdWU7XHJcbiAgfVxyXG4gIHNldCB2YWx1ZShrZXkpIHtcclxuICAgIHRoaXMuX3ZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICB9XHJcbiAgZ2V0IGRhdGUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZGF0ZTtcclxuICB9XHJcbiAgc2V0IGRhdGUoZGF0ZSkge1xyXG4gICAgdGhpcy5fZGF0ZSA9IGdldE9mZnNldGVkRGF0ZShkYXRlKS50b0lTT1N0cmluZygpLnNsaWNlKDAsMTApLnNwbGl0KCctJykucmV2ZXJzZSgpLmpvaW4oJyAnKTtcclxuICB9XHJcbiAgZ2V0IGlkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gIH1cclxuICBzZXQgaWQoZGF0ZSkge1xyXG4gICAgdGhpcy5faWQgPSBkYXRlLnJlcGxhY2UoL1xccy9nLCcnKTtcclxuICB9XHJcbiAgZ2V0IGRheSgpIHtcclxuICAgIHJldHVybiB0aGlzLl9kYXk7XHJcbiAgfVxyXG4gIHNldCBkYXkoZGF0ZSkge1xyXG4gICAgY29uc3QgZGF5SW5kZXggPSBkYXRlLmdldERheSgpO1xyXG4gICAgdGhpcy5fZGF5ID0gd2Vla0RheVtkYXlJbmRleF07XHJcbiAgfVxyXG5cclxuICAvKiBnZXQgdG90YWxIZWlnaHQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fdG90YWxIZWlnaHQ7XHJcbiAgfVxyXG4gIHNldCB0b3RhbEhlaWdodChhbW91bnQpIHtcclxuICAgIHRoaXMuX3RvdGFsSGVpZ2h0ID0gYW1vdW50ICogdGhpcy5pdGVtSGVpZ2h0O1xyXG4gIH0gKi9cclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gRlVOQ1RJT05TIFxyXG5cclxuLy8gRjAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdFVCBPRkZTRVRFRCBEQVRFIFxyXG5cclxuY29uc3QgZ2V0T2Zmc2V0ZWREYXRlID0gKG9iaikgPT4ge1xyXG4gIGNvbnN0IHRpbWVab25lT2Zmc2V0ID0gKG5ldyBEYXRlKCkpLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMDtcclxuICByZXR1cm4gKG5ldyBEYXRlKG9iaiAtIHRpbWVab25lT2Zmc2V0KSk7XHJcbn1cclxuLy8gRjAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIENSRUFURSBIWURSQVBQIERBVEUgS0VZIFxyXG5cclxuY29uc3Qgc2V0RGF0ZUtleSA9IChvYmopID0+IHtcclxuXHJcbiAgY29uc3QgdGltZVpvbmVPZmZzZXQgPSAobmV3IERhdGUoKSkuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwMDAwO1xyXG4gIGxldCBkYXRlT2JqID0gb2JqIHx8IG5ldyBEYXRlKCk7XHJcbiAgZGF0ZU9iaiA9IChuZXcgRGF0ZShkYXRlT2JqIC0gdGltZVpvbmVPZmZzZXQpKTtcclxuXHJcbiAgY29uc3QgcHJlZml4ID0gJ2h5ZHJBcHAtJztcclxuICBjb25zdCBkYXRlU3RyID0gZGF0ZU9iai50b0lTT1N0cmluZygpLnNsaWNlKDAsMTApO1xyXG4gIHJldHVybiBwcmVmaXguY29uY2F0KGRhdGVTdHIpO1xyXG59XHJcbi8vIEYwIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIENSRUFURSBBUlJBWSBPRiBIWURSQVBQIExPQ0FMIFNUT1JBR0UgS0VZUyBcclxuXHJcbmNvbnN0IGdldEh5ZHJhcHBLZXlzID0gKCkgPT4ge1xyXG4gIGNvbnN0IHJlZ2V4ID0gL2h5ZHJBcHAtLztcclxuICByZXR1cm4gT2JqZWN0XHJcbiAgLmtleXMobG9jYWxTdG9yYWdlKVxyXG4gIC5maWx0ZXIoa2V5ID0+IHJlZ2V4LnRlc3Qoa2V5KSlcclxuICAuc29ydCgpXHJcbiAgLnJldmVyc2UoKTtcclxufVxyXG4vLyBGMCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gQ1JFQVRFIEtFWSBWQUxVRSBQQUlSIElOIExPQ0FMIFNUT1JBR0UgXHJcblxyXG5jb25zdCBzZXROZXdLZXlWYWx1ZSA9IChrZXksIHZhbHVlKSA9PiB7XHJcbiAgaWYgKCAhbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSApIHtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgdmFsdWUpO1xyXG4gIH07XHJcbn1cclxuLy8gRjAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBMT09QRUQgUkFOR0UgT0YgVkFMVUVTIFxyXG5cclxuY29uc3QgcmFuZ2UgPSAobWF4LCBudW0sIGFjdGlvbikgPT4ge1xyXG4gIGFjdGlvbiA9PT0gJ2luY3JlYXNlJyA/IG51bSA+PSBtYXggPyBudW0gPSAwIDogbnVtKysgOiBmYWxzZTtcclxuICBhY3Rpb24gPT09ICdkZWNyZWFzZScgPyBudW0gPD0gMCA/IG51bSA9IG1heCA6IG51bS0tIDogZmFsc2U7XHJcbiAgcmV0dXJuIG51bTtcclxufVxyXG4vLyBGMCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gTElNSVRFRCBSQU5HRSBPRiBWQUxVRVMgXHJcblxyXG5jb25zdCBsaW1pdCA9IChtYXgsIG51bSwgYWN0aW9uKSA9PiB7XHJcbiAgYWN0aW9uID09PSAnaW5jcmVhc2UnID8gbnVtID49IG1heCA/IGZhbHNlIDogbnVtKysgOiBmYWxzZTtcclxuICBhY3Rpb24gPT09ICdkZWNyZWFzZScgPyBudW0gPD0gMCA/IGZhbHNlIDogbnVtLS0gOiBmYWxzZTtcclxuICByZXR1cm4gbnVtO1xyXG59XHJcbi8vIEYwIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBTRVQgSU5ESUNBVE9SUyBcclxuXHJcbmNvbnN0IHNldEluZGljYXRvcnMgPSAoaWQsIHZhbHVlKSA9PiB7XHJcblxyXG4gIHZhbHVlID4gNyA/IHZhbHVlID0gNyA6IGZhbHNlO1xyXG5cclxuICBjb25zdCBpbmRpY2F0b3JzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmluZGljYXRvci0tanMtJHtpZH1gKS5jaGlsZHJlbjtcclxuICBjb25zdCBpbmRpY2F0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuaW5kaWNhdG9yLS1qcy0ke2lkfSAuaW5kaWNhdG9yX19zdmctLWpzLSR7dmFsdWV9YCk7XHJcbiAgXHJcbiAgZm9yIChjb25zdCBpbmRpY2F0b3Igb2YgaW5kaWNhdG9ycykge1xyXG4gICAgaW5kaWNhdG9yLmNsYXNzTGlzdC5jb250YWlucygnaW5kaWNhdG9yX19zdmctLXZpc2libGUnKVxyXG4gICAgPyBpbmRpY2F0b3IuY2xhc3NMaXN0LnJlbW92ZSgnaW5kaWNhdG9yX19zdmctLXZpc2libGUnKVxyXG4gICAgOiBmYWxzZTtcclxuICB9XHJcbiAgaW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoJ2luZGljYXRvcl9fc3ZnLS12aXNpYmxlJyk7XHJcbn1cclxuLy8gRjAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIENSRUFURSBBREQgRU5UUlkgQlVUVE9OIFxyXG5cclxuY29uc3QgY3JlYXRlQWRkRW50cnlCdXR0b24gPSAoKSA9PiB7XHJcbiAgY29uc3QgYWRkRW50cnlCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gIGFkZEVudHJ5QnV0dG9uLmNsYXNzTmFtZSA9ICdlbnRyeSBlbnRyeV9fYWRkJztcclxuICBhZGRFbnRyeUJ1dHRvbi5pbm5lckhUTUwgPSBgXHJcbiAgICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGVudHJ5X19idXR0b24gZW50cnlfX2J1dHRvbi0tYWRkIGVudHJ5X19idXR0b24tLWpzLWFkZFwiPlxyXG4gICAgICBBZGQgbmV3IGRheS4uXHJcbiAgICA8L2J1dHRvbj5cclxuICBgO1xyXG4gIGFkZEVudHJ5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZW50ZXJOZXdFbnRyeVZhbHVlKTtcclxuXHJcbiAgcmV0dXJuIGFkZEVudHJ5QnV0dG9uO1xyXG59XHJcbi8vIEYwIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIENSRUFURSAnUkVNT1ZFIElURU0nIEJVVFRPTiBcclxuXHJcbmNvbnN0IGNyZWF0ZVJlbW92ZUVudHJ5QnV0dG9uID0gKCkgPT4ge1xyXG5cclxuICBjb25zdCByZW1vdmVFbnRyeUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gIHJlbW92ZUVudHJ5QnV0dG9uLmNsYXNzTmFtZSA9ICdidXR0b24gZW50cnlfX3JlbW92ZSc7XHJcbiAgcmVtb3ZlRW50cnlCdXR0b24uaW5uZXJIVE1MID0gYFxyXG4gICAgPHN2ZyBjbGFzcz1cImVudHJ5X19zdmdcIiB2aWV3Qm94PVwiMCAwIDUxMiA1MTJcIj5cclxuICAgICAgPHVzZSBocmVmPVwiYXNzZXRzL3N2Zy9pY29ucy5zdmcjcmVtb3ZlLWljb25cIj48L3VzZT5cclxuICAgIDwvc3ZnPlxyXG4gIGBcclxuICByZW1vdmVFbnRyeUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlbW92ZUxhc3RFbnRyeSk7XHJcblxyXG4gIHJldHVybiByZW1vdmVFbnRyeUJ1dHRvbjtcclxufVxyXG4vLyBGMiAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gU0VUIExPQ0FMIFNUT1JBR0UgXHJcblxyXG5jb25zdCBoYW5kbGVEYXRhID0gKCkgPT4ge1xyXG5cclxuICBjb25zdCBkYXRlID0gbmV3IERhdGUoKTtcclxuICBsZXQgZGF0ZUtleSA9IHNldERhdGVLZXkoZGF0ZSk7XHJcbiAgc2V0TmV3S2V5VmFsdWUoZGF0ZUtleSwgMCk7XHJcbiAgbGV0IGh5ZHJhcHBLZXlzID0gZ2V0SHlkcmFwcEtleXMoKTtcclxuICBjb25zdCBvbGRlc3RLZXkgPSBoeWRyYXBwS2V5c1toeWRyYXBwS2V5cy5sZW5ndGggLSAxXTtcclxuICBcclxuICAvLyBjcmVhdGUgb2JqZWN0IGZvciBlYWNoIGtleVxyXG4gIGNvbnN0IGNyZWF0ZUVudHJ5T2JqZWN0ID0gKGRhdGUpID0+IHtcclxuICAgIGNvbnN0IG5ld0VudHJ5ID0gbmV3IEVudHJ5KGRhdGUpO1xyXG4gICAgaHlkcmFwcEFycmF5LnB1c2gobmV3RW50cnkpO1xyXG4gIH1cclxuICAvLyBmaXJzdCBvYmplY3Qgb2YgYXJyYXlcclxuICBjcmVhdGVFbnRyeU9iamVjdChkYXRlKTtcclxuXHJcbiAgLy8gYXV0b2NvbXBsZXRlIHRoZSByZXN0IG9mIGtleXMgaWYgbmVlZGVkXHJcbiAgd2hpbGUgKGRhdGVLZXkgIT09IG9sZGVzdEtleSkge1xyXG4gICAgZGF0ZUtleSA9IHNldERhdGVLZXkoZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpIC0gMSkpO1xyXG4gICAgbGFzdEVudHJ5RGF0ZS5zZXREYXRlKGxhc3RFbnRyeURhdGUuZ2V0RGF0ZSgpIC0gMSk7XHJcbiAgICBzZXROZXdLZXlWYWx1ZShkYXRlS2V5LCAwKTtcclxuICAgIGNyZWF0ZUVudHJ5T2JqZWN0KGRhdGUpO1xyXG4gIH1cclxuICAvL2NvdW50ZXIuaW5uZXJIVE1MID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oZGF0ZUtleSk7XHJcbiAgdXBkYXRlQ291bnRlcignZGlzcGxheVZhbHVlJyk7XHJcbn1cclxuLy8gRjEgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFVQREFURSBDT1VOVEVSIFxyXG5cclxuY29uc3QgdXBkYXRlQ291bnRlciA9IChlKSA9PiB7XHJcbiAgY29uc3Qgc2VsZiA9IGUudGFyZ2V0IHx8IGU7XHJcbiAgY29uc3Qga2V5ID0gc2V0RGF0ZUtleSgpO1xyXG4gIGxldCB2YWx1ZSA9IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkpO1xyXG5cclxuICBzd2l0Y2ggKHNlbGYpIHtcclxuICAgIGNhc2UgJ2Rpc3BsYXlWYWx1ZSc6XHJcbiAgICAgIGNvdW50ZXIuaW5uZXJIVE1MID0gdmFsdWU7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICBjYXNlIGFkZEdsYXNzOlxyXG4gICAgICB2YWx1ZSA8IGNvdW50ZXJNYXhWYWx1ZSA/IHZhbHVlKysgOiB2YWx1ZSA9IGNvdW50ZXJNYXhWYWx1ZTtcclxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7XHJcbiAgICAgIGh5ZHJhcHBBcnJheVswXS52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICBjb3VudGVyLmlubmVySFRNTCA9IHZhbHVlO1xyXG4gICAgICBicmVhaztcclxuXHJcbiAgICBjYXNlIHJlbW92ZUdsYXNzOlxyXG4gICAgICB2YWx1ZSA+IDAgPyB2YWx1ZS0tIDogdmFsdWUgPSAwO1xyXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTtcclxuICAgICAgaHlkcmFwcEFycmF5WzBdLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgIGNvdW50ZXIuaW5uZXJIVE1MID0gdmFsdWU7XHJcbiAgICAgIGJyZWFrO1xyXG4gIH1cclxufVxyXG4vLyBGMiAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEFERCBBUkNISVZFIE5PREUgXHJcblxyXG5jb25zdCBhZGRBcmNoaXZlTm9kZSA9IChpbmRleCwgb3B0aW9uKSA9PiB7XHJcblxyXG4gIGNvbnN0IHt2YWx1ZSwgaWQsIGRheSwgZGF5SHRtbCwgd2Vla0h0bWx9ID0gaHlkcmFwcEFycmF5W2luZGV4XTtcclxuICBcclxuICAvLyBhZGQgbmV3IHdlZWtcclxuICBpZiAoKChkYXkgPT09ICdzdW5kYXknIHx8IGluZGV4ID09PSAwKSkgJiYgb3B0aW9uICE9PSAnYWRkJykge1xyXG5cclxuICAgIGFyY2hpdmVXZWVrcy5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIHdlZWtIdG1sKTsgICAgICAgICAgICAgICAgLy8gISBUTyBSRUZBQ1RPUlxyXG4gICAgY29uc3Qgd2Vla0hlYWRlciA9IGFyY2hpdmVXZWVrcy5sYXN0RWxlbWVudENoaWxkLmZpcnN0RWxlbWVudENoaWxkO1xyXG4gICAgd2Vla0hlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNsaWRlV2Vlayk7XHJcbiAgfVxyXG4gIC8vIGFkZCBuZXh0IGRheSBlbnRyeVxyXG4gIGxldCBsYXN0V2Vla0xpc3QgPSBhcmNoaXZlV2Vla3MubGFzdEVsZW1lbnRDaGlsZC5sYXN0RWxlbWVudENoaWxkO1xyXG4gIGxhc3RXZWVrTGlzdC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGRheUh0bWwpO1xyXG4gIHNldEluZGljYXRvcnMoaWQsIHZhbHVlKTtcclxuXHJcbiAgLy8gYWRkICdhZGQgZW50cnkgYnV0dG9uIGF0IHRoZSBlbmRcclxuICBpZiAoaW5kZXggPT09IGh5ZHJhcHBBcnJheS5sZW5ndGggLSAxKSB7XHJcbiAgICBpZiAoZGF5ID09PSAnbW9uZGF5Jykge1xyXG4gICAgICBhcmNoaXZlV2Vla3MuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIHdlZWtIdG1sKTsgICAgICAgICAgICAgIC8vICEgVE8gUkVGQUNUT1JcclxuICAgICAgY29uc3Qgd2Vla0hlYWRlciA9IGFyY2hpdmVXZWVrcy5sYXN0RWxlbWVudENoaWxkLmZpcnN0RWxlbWVudENoaWxkO1xyXG4gICAgICB3ZWVrSGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2xpZGVXZWVrKTtcclxuICAgIH07XHJcblxyXG4gICAgbGFzdFdlZWtMaXN0ID0gYXJjaGl2ZVdlZWtzLmxhc3RFbGVtZW50Q2hpbGQubGFzdEVsZW1lbnRDaGlsZDtcclxuICAgIGxhc3RXZWVrTGlzdC5hcHBlbmRDaGlsZChhZGRFbnRyeUJ1dHRvbik7XHJcbiAgfVxyXG4gIHVwZGF0ZVdlZWtIZWFkaW5nKCk7XHJcblxyXG4gIC8vIGFkZCBldmVudCBsaXN0ZW5lcnMgdG8gYWxsIGVkaXQgYnV0dG9uc1xyXG4gIGNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdGlvbl9fYnV0dG9uLS1qcy1lZGl0JylbaW5kZXhdO1xyXG4gIGVkaXRCdXR0b24uaW5kZXggPSBpbmRleDtcclxuICBlZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlSXRlbUVkaXQpO1xyXG59XHJcbi8vIEYyIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBTRVQgQVJDSElWRSBcclxuXHJcbmNvbnN0IHNldEFyY2hpdmVET00gPSAoKSA9PiB7XHJcbiAgXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBoeWRyYXBwQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgIGFkZEFyY2hpdmVOb2RlKGkpO1xyXG4gIH1cclxuICAvLyBzZXQgdGhlIG5ld2VzdCB3ZWVrIGFzIHZpc2libGVcclxuICBjb25zdCB3ZWVrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy53ZWVrLS1qcycpO1xyXG4gIHdlZWtzW2N1cnJlbnRXZWVrSW5kZXhdLmNsYXNzTGlzdC5hZGQoJ3dlZWstLXZpc2libGUnKTtcclxuICAvLyBzZXQgJ3JlbW92ZSBlbnRyeScgYnV0dG9uIG9uIHRoZSBsYXN0IGVudHJ5XHJcbiAgaGFuZGxlQXJjaGl2ZUxhc3RFbnRyeSgpO1xyXG59XHJcbi8vIEYyIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gU0VUIFdFRUsgSEVBRElORyBcclxuXHJcbmNvbnN0IHVwZGF0ZVdlZWtIZWFkaW5nID0gKCkgPT4ge1xyXG5cclxuICBjb25zdCB3ZWVrTGlzdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcud2Vla19fbGlzdC0tanMnKTtcclxuICBjb25zdCB3ZWVrSGVhZGluZ3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcud2Vla19faGVhZGluZy0tanMnKTtcclxuXHJcbiAgY29uc3QgZ2V0RGF0ZSA9IChlbGVtZW50KSA9PiB7XHJcblxyXG4gICAgaWYgKGVsZW1lbnQpIHtcclxuICAgICAgY29uc3QgZmlsdGVyZWQgPSBlbGVtZW50LmNsYXNzTmFtZS5zcGxpdCgnICcpLmZpbHRlcihhID0+IC9oeWRyQXBwLy50ZXN0KGEpKTtcclxuICAgICAgcmV0dXJuIGZpbHRlcmVkLnRvU3RyaW5nKCkuc2xpY2UoMTApLnNwbGl0KCctJykucmV2ZXJzZSgpLmpvaW4oJy4nKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnN0IHNldEJ1dHRvbnNWaXNpYmxpdHkgPSAoaW5kZXgsIG9wdGlvbikgPT4ge1xyXG4gICAgY29uc3QgcHJldldlZWtCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcud2Vla19fYnV0dG9uLS1qcy1wcmV2JylbaW5kZXhdO1xyXG4gICAgY29uc3QgbmV4dFdlZWtCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcud2Vla19fYnV0dG9uLS1qcy1uZXh0JylbaW5kZXhdO1xyXG5cclxuICAgIHN3aXRjaCAoaW5kZXgpIHtcclxuXHJcbiAgICAgIGNhc2UgMDpcclxuICAgICAgICBwcmV2V2Vla0J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCd3ZWVrX19idXR0b24tLXZpc2libGUnKTtcclxuICAgICAgICBvcHRpb24gPT09ICdvbmVXZWVrJ1xyXG4gICAgICAgID8gbmV4dFdlZWtCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnd2Vla19fYnV0dG9uLS12aXNpYmxlJylcclxuICAgICAgICA6IG5leHRXZWVrQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3dlZWtfX2J1dHRvbi0tdmlzaWJsZScpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBcclxuICAgICAgY2FzZSB3ZWVrSGVhZGluZ3MubGVuZ3RoIC0gMTpcclxuICAgICAgICBwcmV2V2Vla0J1dHRvbi5jbGFzc0xpc3QuYWRkKCd3ZWVrX19idXR0b24tLXZpc2libGUnKTtcclxuICAgICAgICBuZXh0V2Vla0J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCd3ZWVrX19idXR0b24tLXZpc2libGUnKTtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcHJldldlZWtCdXR0b24uY2xhc3NMaXN0LmFkZCgnd2Vla19fYnV0dG9uLS12aXNpYmxlJyk7XHJcbiAgICAgICAgbmV4dFdlZWtCdXR0b24uY2xhc3NMaXN0LmFkZCgnd2Vla19fYnV0dG9uLS12aXNpYmxlJyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgd2Vla0xpc3RzLmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgY29uc3QgZW50cmllcyA9IHdlZWtMaXN0c1tpXS5xdWVyeVNlbGVjdG9yQWxsKCcuZW50cnktLWpzJyk7XHJcbiAgICBjb25zdCBzdGFydERhdGUgPSBnZXREYXRlKGVudHJpZXNbZW50cmllcy5sZW5ndGggLSAxXSk7XHJcbiAgICBjb25zdCBlbmREYXRlID0gZ2V0RGF0ZShlbnRyaWVzWzBdKTtcclxuICAgIGNvbnN0IGhlYWRpbmcgPSB3ZWVrSGVhZGluZ3NbaV07XHJcblxyXG4gICAgaGVhZGluZy50ZXh0Q29udGVudCA9IGAke3N0YXJ0RGF0ZVxyXG4gICAgPyAoc3RhcnREYXRlID09PSBlbmREYXRlID8gc3RhcnREYXRlIDogYCR7c3RhcnREYXRlLnNsaWNlKDAsNSl9IC0gJHtlbmREYXRlfWApXHJcbiAgICA6IGBOZXcgV2Vla2B9YDtcclxuXHJcbiAgICB3ZWVrTGlzdHMubGVuZ3RoID4gMSA/IHNldEJ1dHRvbnNWaXNpYmxpdHkoaSkgOiBzZXRCdXR0b25zVmlzaWJsaXR5KGksICdvbmVXZWVrJyk7XHJcbiAgfVxyXG59XHJcbi8vIEYxIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFNIT1cgQVJDSElWRSBcclxuXHJcbmNvbnN0IHNob3dBcmNoaXZlID0gKCkgPT4ge1xyXG5cclxuICBlbnRyaWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVudHJ5LS1qcycpO1xyXG5cclxuICBpZiAoYXJjaGl2ZS5jbGFzc0xpc3QuY29udGFpbnMoJ2FyY2hpdmUtLXZpc2libGUnKSkge1xyXG4gICAgYXJjaGl2ZS5jbGFzc0xpc3QucmVtb3ZlKCdhcmNoaXZlLS12aXNpYmxlJylcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZW50ZXJOZXdFbnRyeVZhbHVlKTtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgcmVtb3ZlTGFzdEVudHJ5KTtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgc2xpZGVXZWVrKTtcclxuXHJcbiAgfSBlbHNlIHtcclxuXHJcbiAgICBhcmNoaXZlLmNsYXNzTGlzdC5hZGQoJ2FyY2hpdmUtLXZpc2libGUnKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZW50ZXJOZXdFbnRyeVZhbHVlKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgcmVtb3ZlTGFzdEVudHJ5KTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgc2xpZGVXZWVrKTtcclxuICB9XHJcbn1cclxuLy8gRjIgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBTTElERSBXRUVLIFxyXG5cclxuY29uc3Qgc2xpZGVXZWVrID0gKGUpID0+IHtcclxuXHJcbiAgY29uc3Qgc2VsZiA9IGUua2V5Q29kZSB8fCBlLnRhcmdldDtcclxuICBjb25zdCBwcmV2V2Vla0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy53ZWVrX19idXR0b24tLWpzLXByZXYnKVtjdXJyZW50V2Vla0luZGV4XTtcclxuICBjb25zdCBuZXh0V2Vla0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy53ZWVrX19idXR0b24tLWpzLW5leHQnKVtjdXJyZW50V2Vla0luZGV4XTtcclxuICBjb25zdCB3ZWVrc0Ftb3VudCA9IGFyY2hpdmVXZWVrcy5jaGlsZHJlbi5sZW5ndGg7XHJcblxyXG4gIGNvbnN0IGhhbmRsZVNsaWRlID0gKGRpcmVjdGlvbikgPT4ge1xyXG4gICAgLy8gaGFuZGxlIHByZXZpb3VzIHNlY3Rpb25cclxuICAgIGFyY2hpdmVXZWVrcy5jaGlsZHJlbltjdXJyZW50V2Vla0luZGV4XS5jbGFzc05hbWUgPSBgd2VlayB3ZWVrLS1qcyB3ZWVrLS1zbGlkZS1vdXQtdG8tJHtkaXJlY3Rpb24gPT09ICd0b0xlZnQnID8gYHJpZ2h0YCA6IGBsZWZ0YH1gO1xyXG4gICAgY29uc3QgcHJldmlvdXNXZWVrSW5kZXggPSBjdXJyZW50V2Vla0luZGV4O1xyXG4gICAgLy8gY2hhbmdlIGluZGV4XHJcbiAgICBjdXJyZW50V2Vla0luZGV4ID0gbGltaXQoYXJjaGl2ZVdlZWtzLmNoaWxkcmVuLmxlbmd0aCAtIDEsIGN1cnJlbnRXZWVrSW5kZXgsIGRpcmVjdGlvbiA9PT0gJ3RvTGVmdCcgPyBgZGVjcmVhc2VgIDogYGluY3JlYXNlYCk7XHJcbiAgICAvLyBoYW5kbGUgbmV4dCBzZWN0aW9uXHJcbiAgICBpZiAoY3VycmVudFdlZWtJbmRleCAhPT0gcHJldmlvdXNXZWVrSW5kZXgpIHtcclxuICAgICAgYXJjaGl2ZVdlZWtzLmNoaWxkcmVuW2N1cnJlbnRXZWVrSW5kZXhdLmNsYXNzTGlzdCA9IGB3ZWVrIHdlZWstLWpzIHdlZWstLXZpc2libGUgd2Vlay0tc2xpZGUtaW4tZnJvbS0ke2RpcmVjdGlvbiA9PT0gJ3RvTGVmdCcgPyBgbGVmdGAgOiBgcmlnaHRgfWA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhcmNoaXZlV2Vla3MuY2hpbGRyZW5bY3VycmVudFdlZWtJbmRleF0uY2xhc3NMaXN0ID0gJ3dlZWsgd2Vlay0tanMgd2Vlay0tdmlzaWJsZSc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAod2Vla3NBbW91bnQgPiAxKSB7XHJcbiAgICBzd2l0Y2ggKHNlbGYpIHtcclxuICAgICAgY2FzZSAzNzpcclxuICAgICAgY2FzZSBwcmV2V2Vla0J1dHRvbjpcclxuICAgICAgICBoYW5kbGVTbGlkZSgndG9MZWZ0Jyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgMzk6XHJcbiAgICAgIGNhc2UgbmV4dFdlZWtCdXR0b246XHJcbiAgICAgICAgaGFuZGxlU2xpZGUoJ3RvUmlnaHQnKTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcbn1cclxuLy8gRjEgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEFSQ0hJVkUgTU9EQUwgPDwgU0hPVyBBUkNISVZFIFxyXG5cclxuY29uc3QgZW50ZXJOZXdFbnRyeVZhbHVlID0gKGUpID0+IHtcclxuXHJcbiAgY29uc3Qgc2VsZiA9IGUua2V5Q29kZSB8fCBlLnRhcmdldDtcclxuICBjb25zdCBhZGRFbnRyeUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbnRyeV9fYnV0dG9uLS1qcy1hZGQnKTtcclxuXHJcbiAgaWYgKHNlbGYgPT09IDEwNyB8fCBzZWxmID09PSBhZGRFbnRyeUJ1dHRvbikge1xyXG5cclxuICAgIGxldCB2YWx1ZSA9IDA7XHJcbiAgICBuZXdFbnRyeU1vZGUuY2xhc3NMaXN0LmFkZCgnbmV3LWVudHJ5LS12aXNpYmxlJyk7XHJcbiAgICBuZXdFbnRyeVZhbHVlLnRleHRDb250ZW50ID0gdmFsdWU7XHJcbiAgXHJcbiAgICBjb25zdCBtb2RlT2ZmID0gKCkgPT4ge1xyXG4gICAgICBuZXdFbnRyeU1vZGUuY2xhc3NMaXN0LnJlbW92ZSgnbmV3LWVudHJ5LS12aXNpYmxlJyk7XHJcbiAgICAgIG5ld0VudHJ5TW9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZVZhbHVlKTtcclxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVWYWx1ZSk7XHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZW50ZXJOZXdFbnRyeVZhbHVlKTtcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBzbGlkZVdlZWspO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgY29uc3QgaGFuZGxlVmFsdWUgPSAoZSkgPT4ge1xyXG4gIFxyXG4gICAgICBjb25zdCBzZWxmID0gZS5rZXlDb2RlIHx8IGUudGFyZ2V0O1xyXG4gIFxyXG4gICAgICBzd2l0Y2ggKHNlbGYpIHtcclxuICBcclxuICAgICAgICBjYXNlIDM3OlxyXG4gICAgICAgIGNhc2UgbmV3RW50cnlEZWNyZWFzZTpcclxuICAgICAgICAgIHZhbHVlICE9PSAwID8gdmFsdWUtLSA6IGZhbHNlO1xyXG4gICAgICAgICAgbmV3RW50cnlWYWx1ZS50ZXh0Q29udGVudCA9IHZhbHVlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgMzk6XHJcbiAgICAgICAgY2FzZSBuZXdFbnRyeUluY3JlYXNlOlxyXG4gICAgICAgICAgdmFsdWUgIT09IGNvdW50ZXJNYXhWYWx1ZSA/IHZhbHVlKysgOiBmYWxzZTtcclxuICAgICAgICAgIG5ld0VudHJ5VmFsdWUudGV4dENvbnRlbnQgPSB2YWx1ZTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gIFxyXG4gICAgICAgIGNhc2UgMjc6XHJcbiAgICAgICAgY2FzZSBuZXdFbnRyeUNhbmNlbDpcclxuICAgICAgICAgIG1vZGVPZmYoKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gIFxyXG4gICAgICAgIGNhc2UgMTM6XHJcbiAgICAgICAgY2FzZSBuZXdFbnRyeVNhdmU6XHJcbiAgICAgICAgICBhZGROZXdFbnRyeShlLCB2YWx1ZSk7XHJcbiAgICAgICAgICBtb2RlT2ZmKCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgbmV3RW50cnlNb2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlVmFsdWUpO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVWYWx1ZSk7XHJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGVudGVyTmV3RW50cnlWYWx1ZSk7XHJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHNsaWRlV2Vlayk7XHJcbiAgfVxyXG59XHJcbi8vIEYxIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gQUREIE5FVyBJVEVNIDw8IFNIT1cgQVJDSElWRSBcclxuXHJcbmNvbnN0IGFkZE5ld0VudHJ5ID0gKGUsIHZhbHVlKSA9PiB7XHJcbiAgXHJcbiAgY29uc3Qgc2VsZiA9IGUua2V5Q29kZSB8fCBlLnRhcmdldDtcclxuXHJcbiAgaWYgKHNlbGYgPT09IDEzIHx8IHNlbGYgPT09IG5ld0VudHJ5U2F2ZSkge1xyXG5cclxuICAgIGxldCBsYXN0RW50cnlJbmRleCA9IGh5ZHJhcHBBcnJheS5sZW5ndGggLSAxO1xyXG4gICAgY29uc3QgbGFzdEVudHJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVudHJ5LS1qcycpW2xhc3RFbnRyeUluZGV4XTtcclxuICAgIGxhc3RFbnRyeS5jbGFzc0xpc3QucmVtb3ZlKCdlbnRyeS0tbGFzdCcpO1xyXG5cclxuICAgIGxhc3RFbnRyeURhdGUuc2V0RGF0ZShsYXN0RW50cnlEYXRlLmdldERhdGUoKSAtIDEpO1xyXG4gICAgY29uc3QgbmV3RW50cnlLZXkgPSBzZXREYXRlS2V5KGxhc3RFbnRyeURhdGUpO1xyXG4gICAgXHJcbiAgICAvLyBoYW5kbGUgbG9jYWwgc3RvcmFnZSBhbmQgYXJyYXkgb2Ygb2JqZWN0c1xyXG4gICAgc2V0TmV3S2V5VmFsdWUobmV3RW50cnlLZXksIHZhbHVlKTtcclxuICAgIGNvbnN0IG5ld0VudHJ5ID0gbmV3IEVudHJ5KGxhc3RFbnRyeURhdGUpO1xyXG4gICAgbmV3RW50cnkudmFsdWUgPSBuZXdFbnRyeUtleTtcclxuICAgIGh5ZHJhcHBBcnJheS5wdXNoKG5ld0VudHJ5KTtcclxuXHJcbiAgICAvLyBjcmVhdGUgbmV3IGVudHJ5IG5vZGVcclxuICAgIGxhc3RFbnRyeUluZGV4ID0gaHlkcmFwcEFycmF5Lmxlbmd0aCAtIDE7XHJcbiAgICBhZGRBcmNoaXZlTm9kZShsYXN0RW50cnlJbmRleCwgJ2FkZCcpO1xyXG5cclxuICAgIC8vIGp1bXAgdG8gdGhlIGxhc3Qgd2Vla1xyXG4gICAgY29uc3Qgd2Vla3MgPSBhcmNoaXZlV2Vla3MuY2hpbGRyZW47XHJcbiAgICBjb25zdCBjdXJyZW50V2VlayA9IHdlZWtzW2N1cnJlbnRXZWVrSW5kZXhdO1xyXG4gICAgY29uc3QgbGFzdFdlZWtJbmRleCA9IHdlZWtzLmxlbmd0aCAtIDE7XHJcbiAgICBjb25zdCBsYXN0V2VlayA9IHdlZWtzW2xhc3RXZWVrSW5kZXhdO1xyXG4gICAgaWYgKGN1cnJlbnRXZWVrSW5kZXggIT09IGxhc3RXZWVrSW5kZXgpIHtcclxuICAgICAgY3VycmVudFdlZWtJbmRleCA9IGFyY2hpdmVXZWVrcy5jaGlsZHJlbi5sZW5ndGggLSAxO1xyXG4gICAgICBjdXJyZW50V2Vlay5jbGFzc05hbWUgPSAnd2VlayB3ZWVrLS1qcyB3ZWVrLS1zbGlkZS1vdXQtdG8tbGVmdCc7XHJcbiAgICAgIGxhc3RXZWVrLmNsYXNzTmFtZSA9ICd3ZWVrIHdlZWstLWpzIHdlZWstLXZpc2libGUgd2Vlay0tc2xpZGUtaW4tZnJvbS1yaWdodCc7XHJcbiAgICB9XHJcbiAgICBoYW5kbGVBcmNoaXZlTGFzdEVudHJ5KCk7XHJcbiAgfVxyXG59XHJcbi8vIEYxIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEFESlVTVCBMQVNUIElURU0gT0YgTElTVCBcclxuXHJcbmNvbnN0IGhhbmRsZUFyY2hpdmVMYXN0RW50cnkgPSAoKSA9PiB7XHJcblxyXG4gIGNvbnN0IGVudHJpZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZW50cnktLWpzJyk7XHJcbiAgY29uc3QgbGFzdEVudHJ5ID0gZW50cmllc1tlbnRyaWVzLmxlbmd0aCAtIDFdO1xyXG4gIGNvbnN0IGxhc3RFbnRyeVZhbHVlTm9kZSA9IGxhc3RFbnRyeS5xdWVyeVNlbGVjdG9yKCcuZW50cnlfX3ZhbHVlLS1qcycpO1xyXG5cclxuICBpZiAoZW50cmllcy5sZW5ndGggPiAxKSB7XHJcbiAgICBsYXN0RW50cnkuaW5zZXJ0QmVmb3JlKHJlbW92ZUVudHJ5QnV0dG9uLCBsYXN0RW50cnlWYWx1ZU5vZGUpO1xyXG4gICAgbGFzdEVudHJ5LmNsYXNzTGlzdC5hZGQoJ2VudHJ5LS1sYXN0Jyk7XHJcbiAgfVxyXG59XHJcbi8vIEYxIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBSRU1PVkUgTEFTVCBJVEVNIDw8IFNIT1cgQVJDSElWRSBcclxuXHJcbmNvbnN0IHJlbW92ZUxhc3RFbnRyeSA9IChlKSA9PiB7XHJcblxyXG4gIGNvbnN0IHNlbGYgPSBlLmtleUNvZGUgfHwgZS4gdGFyZ2V0O1xyXG4gIGNvbnN0IGxhc3RFbnRyeUluZGV4ID0gaHlkcmFwcEFycmF5Lmxlbmd0aCAtIDE7XHJcbiAgY29uc3Qge2RheSwga2V5fSA9IGh5ZHJhcHBBcnJheVtsYXN0RW50cnlJbmRleF07XHJcbiAgY29uc3QgbGFzdEVudHJ5Tm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lbnRyeS0tanMnKVtsYXN0RW50cnlJbmRleF07XHJcblxyXG4gIGlmIChzZWxmID09PSAxMDkgfHwgc2VsZiA9PT0gcmVtb3ZlRW50cnlCdXR0b24pIHtcclxuXHJcbiAgICBpZiAoaHlkcmFwcEFycmF5Lmxlbmd0aCA+IDEpIHtcclxuXHJcbiAgICAgIGh5ZHJhcHBBcnJheS5wb3AoKTtcclxuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcclxuICAgICAgbGFzdEVudHJ5RGF0ZS5zZXREYXRlKGxhc3RFbnRyeURhdGUuZ2V0RGF0ZSgpICsgMSk7XHJcbiAgICAgIGxhc3RFbnRyeU5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChsYXN0RW50cnlOb2RlKTtcclxuXHJcbiAgICAgIC8vIHJlbW92aW5nIGxhc3Qgd2VlayBzZWN0aW9uIGFmdGVyIGRlbGV0aW5nIGxhc3QgZGF5IG9mIHRoYXQgd2Vla1xyXG4gICAgICBpZiAoZGF5ID09PSAnbW9uZGF5Jykge1xyXG4gICAgICAgIGNvbnN0IHdlZWtUb1JlbW92ZSA9IGFyY2hpdmVXZWVrcy5sYXN0RWxlbWVudENoaWxkO1xyXG4gICAgICAgIGNvbnN0IGlmVmlzaWJsZSA9IHdlZWtUb1JlbW92ZS5jbGFzc0xpc3QuY29udGFpbnMoJ3dlZWstLXZpc2libGUnKTtcclxuICAgICAgICBhcmNoaXZlV2Vla3MucmVtb3ZlQ2hpbGQoYXJjaGl2ZVdlZWtzLmxhc3RFbGVtZW50Q2hpbGQpO1xyXG4gICAgICAgIGNvbnN0IGxhc3RXZWVrID0gYXJjaGl2ZVdlZWtzLmxhc3RFbGVtZW50Q2hpbGQ7XHJcbiAgICAgICAgY29uc3QgbGFzdFdlZWtMaXN0ID0gbGFzdFdlZWsubGFzdEVsZW1lbnRDaGlsZDtcclxuICAgICAgICBpZiAoaWZWaXNpYmxlKSB7XHJcbiAgICAgICAgICBsYXN0V2Vlay5jbGFzc05hbWUgPSAnd2VlayB3ZWVrLS1qcyB3ZWVrLS12aXNpYmxlIHdlZWstLXNsaWRlLWluLWZyb20tbGVmdCc7Y3VycmVudFdlZWtJbmRleC0tO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsYXN0V2Vla0xpc3QuYXBwZW5kQ2hpbGQoYWRkRW50cnlCdXR0b24pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBhZGQgcmVtb3ZlIGJ1dHRvbiBvbiBjdXJyZW50IGxhc3QgaXRlbVxyXG4gICAgICBoYW5kbGVBcmNoaXZlTGFzdEVudHJ5KCk7XHJcbiAgICAgIHVwZGF0ZVdlZWtIZWFkaW5nKCk7XHJcbiAgICB9IGVsc2Uge1xyXG5cclxuICAgIH1cclxuICB9XHJcbn1cclxuLy8gRjIgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBIQU5ETEUgSVRFTSBFRElUIFxyXG5cclxuY29uc3QgaGFuZGxlSXRlbUVkaXQgPSAoZSkgPT4ge1xyXG4gIGNvbnN0IGl0ZW1JbmRleCA9IGUudGFyZ2V0LmluZGV4O1xyXG5cclxuICBjb25zdCBlbnRyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lbnRyeS0tanMnKVtpdGVtSW5kZXhdO1xyXG4gIGNvbnN0IGVudHJ5SGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVudHJ5X19oZWFkZXItLWpzJylbaXRlbUluZGV4XTtcclxuICBjb25zdCBlbnRyeVZhbHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVudHJ5X192YWx1ZS0tanMnKVtpdGVtSW5kZXhdO1xyXG4gIGNvbnN0IGVkaXRTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVkaXRpb24tLWpzJylbaXRlbUluZGV4XTtcclxuICBjb25zdCBkZWNyZWFzZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lZGl0aW9uX19idXR0b24tLWpzLWRlY3JlYXNlJylbaXRlbUluZGV4XTtcclxuICBjb25zdCBpbmNyZWFzZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lZGl0aW9uX19idXR0b24tLWpzLWluY3JlYXNlJylbaXRlbUluZGV4XTtcclxuICBjb25zdCBjYW5jZWxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdGlvbl9fYnV0dG9uLS1qcy1jYW5jZWwnKVtpdGVtSW5kZXhdO1xyXG4gIGNvbnN0IHNhdmVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdGlvbl9fYnV0dG9uLS1qcy1zYXZlJylbaXRlbUluZGV4XTtcclxuXHJcbiAgLy8gRjAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFRPR0dMRSBJVEVNIERJU1BMQVkgPDwgSEFORExFIElURU0gRURJVCBcclxuXHJcbiAgY29uc3QgdG9nZ2xlSXRlbURpc3BsYXkgPSAoKSA9PiB7XHJcblxyXG4gICAgZm9yIChjb25zdCBlZGl0QnV0dG9uIG9mIGVkaXRTZWN0aW9uLmNoaWxkcmVuKSB7XHJcbiAgICAgIGVkaXRCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnZWRpdGlvbl9fYnV0dG9uLS12aXNpYmxlJyk7XHJcbiAgICB9XHJcbiAgICBlZGl0U2VjdGlvbi5jbGFzc0xpc3QudG9nZ2xlKCdlZGl0aW9uLS12aXNpYmxlJyk7XHJcbiAgICBlbnRyeS5jbGFzc0xpc3QudG9nZ2xlKCdlbnRyeS0tZWRpdC1tb2RlJyk7XHJcbiAgICBlbnRyeUhlYWRlci5jbGFzc0xpc3QudG9nZ2xlKCdlbnRyeV9faGVhZGVyLS1lZGl0LW1vZGUnKTtcclxuXHJcbiAgICBpdGVtSW5kZXggPT09IGh5ZHJhcHBBcnJheS5sZW5ndGggLSAxXHJcbiAgICA/IHJlbW92ZUVudHJ5QnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2VudHJ5X19yZW1vdmUtLWhpZGRlbicpXHJcbiAgICA6IGZhbHNlO1xyXG4gIH1cclxuICAvLyBGMSAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBFWElUIEVESVQgTU9ERSA8PCBIQU5ETEUgSVRFTSBFRElUIFxyXG5cclxuICBjb25zdCBleGl0RWRpdE1vZGUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7dmFsdWUsIGlkfSA9IGh5ZHJhcHBBcnJheVtpdGVtSW5kZXhdO1xyXG4gICAgXHJcbiAgICB0b2dnbGVJdGVtRGlzcGxheSgpO1xyXG4gICAgZW50cnlWYWx1ZS50ZXh0Q29udGVudCA9IHZhbHVlO1xyXG4gICAgc2V0SW5kaWNhdG9ycyhpZCwgdmFsdWUpO1xyXG5cclxuICAgIGFyY2hpdmUucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVFZGl0aW9uKTtcclxuICAgIGFyY2hpdmUucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUVkaXRpb24pO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBzbGlkZVdlZWspO1xyXG4gIH1cclxuICAvLyBGMSAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBIQU5ETEUgRURJVElPTiA8PCBIQU5ETEUgSVRFTSBFRElUIFxyXG5cclxuICBjb25zdCBoYW5kbGVFZGl0aW9uID0gKGUpID0+IHtcclxuICAgIGNvbnN0IHNlbGYgPSBlLmtleUNvZGUgfHwgZS50YXJnZXQ7XHJcbiAgICBsZXQgZGF5VmFsdWUgPSBwYXJzZUludChlbnRyeVZhbHVlLnRleHRDb250ZW50KTtcclxuXHJcbiAgICBjb25zdCB7a2V5LCBpZH0gPSBoeWRyYXBwQXJyYXlbaXRlbUluZGV4XTtcclxuXHJcbiAgICBzd2l0Y2ggKHNlbGYpIHtcclxuXHJcbiAgICAgIGNhc2UgNDA6XHJcbiAgICAgIGNhc2UgZGVjcmVhc2VCdXR0b246XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGRheVZhbHVlID4gMCA/IGRheVZhbHVlLS0gOiBmYWxzZTtcclxuICAgICAgICBlbnRyeVZhbHVlLnRleHRDb250ZW50ID0gZGF5VmFsdWU7XHJcbiAgICAgICAgc2V0SW5kaWNhdG9ycyhpZCwgZGF5VmFsdWUpO1xyXG4gICAgICBicmVhaztcclxuICAgICAgXHJcbiAgICAgIGNhc2UgMzg6XHJcbiAgICAgIGNhc2UgaW5jcmVhc2VCdXR0b246XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGRheVZhbHVlIDwgY291bnRlck1heFZhbHVlID8gZGF5VmFsdWUrKyA6IGZhbHNlO1xyXG4gICAgICAgIGVudHJ5VmFsdWUudGV4dENvbnRlbnQgPSBkYXlWYWx1ZTtcclxuICAgICAgICBzZXRJbmRpY2F0b3JzKGlkLCBkYXlWYWx1ZSk7XHJcbiAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSAyNzpcclxuICAgICAgY2FzZSBhcmNoaXZlT3ZlcmxheTpcclxuICAgICAgY2FzZSBjYW5jZWxCdXR0b246XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGV4aXRFZGl0TW9kZSgpO1xyXG4gICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgMTM6XHJcbiAgICAgIGNhc2Ugc2F2ZUJ1dHRvbjpcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBkYXlWYWx1ZSk7XHJcbiAgICAgICAgLy8gc2V0dGVyIGZ1bmN0aW9uXHJcbiAgICAgICAgaHlkcmFwcEFycmF5W2l0ZW1JbmRleF0udmFsdWUgPSBrZXk7XHJcbiAgICAgICAgZXhpdEVkaXRNb2RlKCk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBGVU5DVElPTiBDQUxMUyA8PCBIQU5ETEUgSVRFTSBFRElUIFxyXG5cclxuICB0b2dnbGVJdGVtRGlzcGxheSgpO1xyXG4gIGFyY2hpdmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVFZGl0aW9uKTtcclxuICBhcmNoaXZlLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVFZGl0aW9uKTtcclxuICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHNsaWRlV2Vlayk7XHJcblxyXG59XHJcbi8vIEYyIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBFTkQgT0YgSEFORExFIElURU0gRURJVCBcclxuXHJcbi8qXHJcbiMjICAgICAjIyAgICAjIyMgICAgIyMjIyMjIyMgICMjIyMgICAgIyMjICAgICMjIyMjIyMjICAjIyAgICAgICAjIyMjIyMjIyAgIyMjIyMjXHJcbiMjICAgICAjIyAgICMjICMjICAgIyMgICAgICMjICAjIyAgICAjIyAjIyAgICMjICAgICAjIyAjIyAgICAgICAjIyAgICAgICAjIyAgICAjI1xyXG4jIyAgICAgIyMgICMjICAgIyMgICMjICAgICAjIyAgIyMgICAjIyAgICMjICAjIyAgICAgIyMgIyMgICAgICAgIyMgICAgICAgIyNcclxuIyMgICAgICMjICMjICAgICAjIyAjIyMjIyMjIyAgICMjICAjIyAgICAgIyMgIyMjIyMjIyMgICMjICAgICAgICMjIyMjIyAgICAjIyMjIyNcclxuICMjICAgIyMgICMjIyMjIyMjIyAjIyAgICMjICAgICMjICAjIyMjIyMjIyMgIyMgICAgICMjICMjICAgICAgICMjICAgICAgICAgICAgICMjXHJcbiAgIyMgIyMgICAjIyAgICAgIyMgIyMgICAgIyMgICAjIyAgIyMgICAgICMjICMjICAgICAjIyAjIyAgICAgICAjIyAgICAgICAjIyAgICAjI1xyXG4gICAjIyMgICAgIyMgICAgICMjICMjICAgICAjIyAjIyMjICMjICAgICAjIyAjIyMjIyMjIyAgIyMjIyMjIyMgIyMjIyMjIyMgICMjIyMjI1xyXG4qL1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gVkFSSUFCTEVTIFxyXG4vLyBBUFBcclxuY29uc3QgYXBwQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFwcF9fY29udGFpbmVyLS1qcycpO1xyXG5jb25zdCBhZGRHbGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcHBfX2J1dHRvbi0tanMtYWRkJyk7XHJcbmNvbnN0IHJlbW92ZUdsYXNzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFwcF9fYnV0dG9uLS1qcy1yZW1vdmUnKTtcclxuY29uc3QgY291bnRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nbGFzc19fY291bnRlci0tanMnKTtcclxuY29uc3QgY291bnRlck1heFZhbHVlID0gOTk7XHJcbi8vIEFSQ0hJVkVcclxuY29uc3QgYXJjaGl2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcmNoaXZlLS1qcycpO1xyXG5jb25zdCBhcmNoaXZlT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcmNoaXZlX19vdmVybGF5LS1qcycpO1xyXG5jb25zdCBhcmNoaXZlV2Vla3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJjaGl2ZV9fd2Vla3MtLWpzJyk7XHJcbmNvbnN0IGFyY2hpdmVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbl9fYnV0dG9uLS1qcy1hcmNoaXZlJyk7XHJcbmNvbnN0IHByZXZXZWVrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFyY2hpdmVfX2J1dHRvbi0tanMtcHJldicpO1xyXG5jb25zdCBuZXh0V2Vla0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcmNoaXZlX19idXR0b24tLWpzLW5leHQnKTtcclxuY29uc3QgYWRkRW50cnlCdXR0b24gPSBjcmVhdGVBZGRFbnRyeUJ1dHRvbigpO1xyXG5jb25zdCByZW1vdmVFbnRyeUJ1dHRvbiA9IGNyZWF0ZVJlbW92ZUVudHJ5QnV0dG9uKCk7XHJcbmxldCBjdXJyZW50V2Vla0luZGV4ID0gMDtcclxuLy8gTkVXIEVOVFJZXHJcbmNvbnN0IG5ld0VudHJ5TW9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXctZW50cnktLWpzJyk7XHJcbmNvbnN0IG5ld0VudHJ5VmFsdWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3LWVudHJ5X192YWx1ZS0tanMnKTtcclxuY29uc3QgbmV3RW50cnlEZWNyZWFzZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXctZW50cnlfX2J1dHRvbi0tanMtZGVjcmVhc2UnKTtcclxuY29uc3QgbmV3RW50cnlJbmNyZWFzZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXctZW50cnlfX2J1dHRvbi0tanMtaW5jcmVhc2UnKTtcclxuY29uc3QgbmV3RW50cnlDYW5jZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3LWVudHJ5X19idXR0b24tLWpzLWNhbmNlbCcpO1xyXG5jb25zdCBuZXdFbnRyeVNhdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3LWVudHJ5X19idXR0b24tLWpzLXNhdmUnKTtcclxuLy8gU1RBVFNcclxuY29uc3Qgc3RhdHNCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbl9fYnV0dG9uLS1qcy1zdGF0cycpO1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEZVTkNUSU9OIENBTExTIFxyXG5cclxuaGFuZGxlRGF0YSgpO1xyXG5zZXRBcmNoaXZlRE9NKCk7XHJcbnVwZGF0ZVdlZWtIZWFkaW5nKCk7XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBWQVJJQUJMRVMgXHJcblxyXG5sZXQgZWRpdEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdGlvbl9fYnV0dG9uLS1qcy1lZGl0Jyk7XHJcbmxldCBlbnRyaWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVudHJ5LS1qcycpO1xyXG5jb25zdCBhZGROZXdEYXlCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZW50cnlfX2J1dHRvbi0tanMtYWRkJyk7XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBFVkVOVCBMSVNURU5FUlMgXHJcblxyXG5zaG93QXJjaGl2ZSgpOyAgLy8gISBmb3IgdGVzdHNcclxuXHJcbmFwcENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHVwZGF0ZUNvdW50ZXIpO1xyXG5hcmNoaXZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd0FyY2hpdmUpO1xyXG4vL2xvYWRNb3JlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbG9hZE1vcmVJdGVtcyk7XHJcblxyXG4vKiBmb3IgKGxldCBpID0gMDsgaSA8IGVkaXRCdXR0b25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgY29uc3QgZWRpdEJ1dHRvbiA9IGVkaXRCdXR0b25zW2ldO1xyXG4gIGVkaXRCdXR0b24uaW5kZXggPSBpO1xyXG4gIGVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVJdGVtRWRpdCk7XHJcbn0gKi8iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n")}]);