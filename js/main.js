!function(e){var n={};function t(c){if(n[c])return n[c].exports;var l=n[c]={i:c,l:!1,exports:{}};return e[c].call(l.exports,l,l.exports,t),l.l=!0,l.exports}t.m=e,t.c=n,t.d=function(e,n,c){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:c})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(t.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var l in e)t.d(c,l,function(n){return e[n]}.bind(null,l));return c},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(module,exports,__webpack_require__){"use strict";eval("\n\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', function() {\n    navigator.serviceWorker.register('serviceworker.js').then(function(registration) {\n      // Registration was successful\n      //console.log('ServiceWorker registration successful with scope: ', registration.scope);\n    }, function(err) {\n      // registration failed :(\n      console.log('ServiceWorker registration failed: ', err);\n    });\n  });\n}\n\n/********** VARIABLES **********/\n\nconst pageOverlay = document.querySelector('.page-overlay--js');\nconst addGlass = document.querySelector('.app__button--js-add');\nconst removeGlass = document.querySelector('.app__button--js-remove');\nconst counter = document.querySelector('.glass__counter--js');\nconst archive = document.querySelector('.archive--js');\nconst archiveList = document.querySelector('.archive__list--js');\nconst archiveButton = document.querySelector('.app__button--js-archive');\n\nconst counterMaxValue = 100;\n\nconst baseClassname = \"indicator__section indicator__section--js\";\nconst lowLevelClassname = `${baseClassname} indicator__section--low`;\nconst mediumLevelClassname = `${baseClassname} indicator__section--medium`;\nconst highLevelClassname = `${baseClassname} indicator__section--high`;\n\n/********** FUNCTIONS **********/\n\n// create hydrApp date key\nconst setDateKey = (obj) => {\n  const prefix = 'hydrApp-';\n  const date = obj.toISOString().slice(0,10);\n  return prefix.concat(date);\n}\n\n// create key value pair in localStorage\nconst setNewKeyValue = (key, value) => {\n  if ( !localStorage.getItem(key) ) {\n    localStorage.setItem(key, value);\n  };\n}\n\nconst getHydrappKeys = () => {\n  // create array of hydrApp localStorage keys\n  const regex = /hydrApp-/;\n  return Object\n  .keys(localStorage)\n  .filter(key => regex.test(key))\n  .sort()\n  .reverse();\n}\n\nconst getOffsetedDate = () => {\n  const timeZoneOffset = (new Date()).getTimezoneOffset() * 60000;\n  return (new Date(Date.now() - timeZoneOffset));\n}\n\n\nconst setCounter = () => {\n  const offsetedDate = getOffsetedDate();\n  let dateKey = setDateKey(offsetedDate);\n  console.log(`newest key: ${dateKey}`);\n\n  setNewKeyValue(dateKey, 0);\n\n  const hydrappKeys = getHydrappKeys();\n  const oldestKey = hydrappKeys[hydrappKeys.length-1];\n  console.log(`oldest key: ${oldestKey}`);\n\n  // autocomplete missing keys in localstorage\n  if ( hydrappKeys.length > 1 ) {\n    let limit = 0; // for tests to avoid loop error\n\n    while (setDateKey(offsetedDate) !== oldestKey && limit < 50) {\n      offsetedDate.setDate( offsetedDate.getDate() - 1 );\n      const prevDateKey = setDateKey(offsetedDate);\n      setNewKeyValue(prevDateKey, 0);\n      limit++;\n    }\n  }\n  counter.innerHTML = localStorage.getItem(dateKey);\n}\n\nconst setArchive = () => {\n  const hydrappKeys = getHydrappKeys();\n\n  if (hydrappKeys.length === 1) {\n    archiveList.innerHTML += `\n      <li class=\"archive__item archive__item--empty\">No history yet...</li>\n      `;\n  } else {\n    for (let i = 1; i < hydrappKeys.length; i++) {\n      const key = hydrappKeys[i];\n      const value = localStorage.getItem(key);\n      const date = key\n        .replace('hydrApp-','')\n        .split('-')\n        .reverse()\n        .join(' ');\n      const dateHash = date.replace(/\\s/g,'');\n      \n      archiveList.innerHTML += `\n      <li class=\"archive__item archive__item--js ${key}\">\n        <p class=\"archive__date\">${date}</p>\n        <p class=\"archive__value archive__value--js\">\n          ${value}\n        </p>\n        <div class=\"edition\">\n          <button class=\"button edition__edit edition__edit--js\">\n            <i class=\"edition__icon far fa-edit\"></i>\n          </button>\n          <div class=\"edition__group edition__group--js\">\n            <button class=\"button edition__decrease edition__decrease--js\">\n              <i class=\"edition__icon fas fa-caret-left\"></i>\n            </button>\n            <button class=\"button edition__increase edition__increase--js\">\n              <i class=\"edition__icon fas fa-caret-right\"></i>\n            </button>\n            <button class=\"button edition__cancel edition__cancel--js\">\n              <i class=\"edition__icon fas fa-undo\"></i>\n            </button>\n            <button class=\"button edition__save edition__save--js\">\n              <i class=\"edition__icon far fa-save\"></i>\n            </button>\n          </div>\n        </div>\n        <div class=\"indicator indicator--js-${dateHash}\">\n          <div class=\"${baseClassname}\"></div>\n          <div class=\"${baseClassname}\"></div>\n          <div class=\"${baseClassname}\"></div>\n        </div>\n      </li>\n      `;\n  \n      setIndicators(dateHash, value);\n    }\n  }\n}\n\nconst setIndicators = (id, value) => {\n  const indicators = document.querySelectorAll(`.indicator--js-${id} .indicator__section--js`);\n\n  if (value >= 6) {\n    for (const indicator of indicators) {\n      indicator.className = highLevelClassname;\n    }\n  } else if (value >= 3) {\n    indicators[0].className = mediumLevelClassname;\n    indicators[1].className = mediumLevelClassname;\n    indicators[2].className = baseClassname;\n  } else {\n    indicators[0].className = lowLevelClassname;\n    indicators[1].className = baseClassname;\n    indicators[2].className = baseClassname;\n  }\n}\n\nconst updateCounter = (e) => {\n  const offsetedDate = getOffsetedDate();\n  const key = setDateKey(offsetedDate);\n  const value = parseInt(localStorage.getItem(key));\n  let newValue;\n\n  if (e.target === addGlass) {\n    value < counterMaxValue ? newValue = value + 1 : newValue = counterMaxValue;\n  } else if (e.target === removeGlass) {\n    value > 0 ? newValue = value - 1 : newValue = 0;\n  }\n\n  localStorage.setItem(key, newValue);\n  counter.innerHTML = newValue;\n  \n  // updating archive newest entry indicator\n  const dateHash = offsetedDate\n    .toISOString()\n    .slice(0,10)\n    .split('-')\n    .reverse()\n    .join('');\n  setIndicators(dateHash, newValue);\n}\n\nconst toggleArchive = (e) => {\n  const listHeight = archiveList.clientHeight;\n\n  if (archive.classList.contains('archive--visible')) {\n    archive.classList.remove('archive--visible');\n    archive.style.height = 0;\n    e.target.textContent = \"Show archive\";\n  } else {\n    archive.classList.add('archive--visible');\n    archive.style.height = listHeight + \"px\";\n    e.target.textContent = \"Hide archive\";\n  }\n}\n\n\n\n\n\n\n\nconst handleItemEdit = (e) => {\n  const itemIndex = e.target.index;\n  const archiveItem = archiveItems[itemIndex];\n  const editButton = editButtons[itemIndex];\n  const editGroup = editGroups[itemIndex];\n  const decreaseButton = decreaseButtons[itemIndex];\n  const increaseButton = increaseButtons[itemIndex];\n  const cancelButton = cancelButtons[itemIndex];\n  const saveButton = saveButtons[itemIndex];\n  const archiveValue = archiveValues[itemIndex];\n\n  const itemClassName = e.target.parentElement.parentElement.className;\n  const hydrAppKey = itemClassName\n    .split(' ')\n    .filter(key => /hydrApp/.test(key))\n    .toString();\n\n\n\n  \n  \n  const toggleItemEdit = () => {\n    archiveItem.classList.toggle('archive__item--on-top');\n    editButton.classList.toggle('edition__edit--hidden');\n    editGroup.classList.toggle('edition__group--visible');\n    pageOverlay.classList.toggle('page-overlay--visible');\n    cancelButton.removeEventListener('click', toggleItemEdit);\n    pageOverlay.removeEventListener('click', toggleItemEdit);\n  }\n\n  const decreaseValue = () => {   // ZOPTYMALIZOWAC Z UPDATE COUNTER\n    let value = localStorage.getItem(hydrAppKey);\n    value > 0 ? value-- : false;\n    localStorage.setItem(hydrAppKey, value);\n    archiveValue.textContent = value;\n  }\n\n  const increaseValue = () => {   // ZOPTYMALIZOWAC Z UPDATE COUNTER\n    let value = localStorage.getItem(hydrAppKey);\n    value < counterMaxValue ? value++ : false;\n    localStorage.setItem(hydrAppKey, value);\n    archiveValue.textContent = value;\n  }\n\n  toggleItemEdit();\n\n\n  cancelButton.addEventListener('click', toggleItemEdit);\n  pageOverlay.addEventListener('click', toggleItemEdit);\n  decreaseButton.addEventListener('click', decreaseValue);\n  increaseButton.addEventListener('click', increaseValue);\n}\n\n\n\n\n\n\n\n\n\n\n\n\nsetCounter();\nsetArchive();\n\nconst archiveItems = document.querySelectorAll('.archive__item--js');\nconst editButtons = document.querySelectorAll('.edition__edit--js');\nconst editGroups = document.querySelectorAll('.edition__group--js');\nconst decreaseButtons = document.querySelectorAll('.edition__decrease--js');\nconst increaseButtons = document.querySelectorAll('.edition__increase--js');\nconst cancelButtons = document.querySelectorAll('.edition__cancel--js');\nconst saveButtons = document.querySelectorAll('.edition__save--js');\nconst archiveValues = document.querySelectorAll('.archive__value--js');\n\naddGlass.addEventListener('click', updateCounter);\nremoveGlass.addEventListener('click', updateCounter);\narchiveButton.addEventListener('click', toggleArchive);\n\nfor (let i = 0; i < editButtons.length; i++) {\n  const editButton = editButtons[i];\n  editButton.index = i;\n  editButton.addEventListener('click', handleItemEdit);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFpbi5qcz85MjkxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSw2QkFBNkIsY0FBYztBQUMzQyxnQ0FBZ0MsY0FBYztBQUM5Qyw4QkFBOEIsY0FBYzs7QUFFNUM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixRQUFROztBQUVyQzs7QUFFQTtBQUNBO0FBQ0EsNkJBQTZCLFVBQVU7O0FBRXZDO0FBQ0E7QUFDQSxrQkFBa0I7O0FBRWxCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILG1CQUFtQix3QkFBd0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1EQUFtRCxJQUFJO0FBQ3ZELG1DQUFtQyxLQUFLO0FBQ3hDO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsU0FBUztBQUN2RCx3QkFBd0IsY0FBYztBQUN0Qyx3QkFBd0IsY0FBYztBQUN0Qyx3QkFBd0IsY0FBYztBQUN0QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpRUFBaUUsR0FBRzs7QUFFcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUFhQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLGVBQWUsd0JBQXdCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuaWYgKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IpIHtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHtcbiAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3Rlcignc2VydmljZXdvcmtlci5qcycpLnRoZW4oZnVuY3Rpb24ocmVnaXN0cmF0aW9uKSB7XG4gICAgICAvLyBSZWdpc3RyYXRpb24gd2FzIHN1Y2Nlc3NmdWxcbiAgICAgIC8vY29uc29sZS5sb2coJ1NlcnZpY2VXb3JrZXIgcmVnaXN0cmF0aW9uIHN1Y2Nlc3NmdWwgd2l0aCBzY29wZTogJywgcmVnaXN0cmF0aW9uLnNjb3BlKTtcbiAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgIC8vIHJlZ2lzdHJhdGlvbiBmYWlsZWQgOihcbiAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aWNlV29ya2VyIHJlZ2lzdHJhdGlvbiBmYWlsZWQ6ICcsIGVycik7XG4gICAgfSk7XG4gIH0pO1xufVxuXG4vKioqKioqKioqKiBWQVJJQUJMRVMgKioqKioqKioqKi9cblxuY29uc3QgcGFnZU92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnZS1vdmVybGF5LS1qcycpO1xuY29uc3QgYWRkR2xhc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXBwX19idXR0b24tLWpzLWFkZCcpO1xuY29uc3QgcmVtb3ZlR2xhc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXBwX19idXR0b24tLWpzLXJlbW92ZScpO1xuY29uc3QgY291bnRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nbGFzc19fY291bnRlci0tanMnKTtcbmNvbnN0IGFyY2hpdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJjaGl2ZS0tanMnKTtcbmNvbnN0IGFyY2hpdmVMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFyY2hpdmVfX2xpc3QtLWpzJyk7XG5jb25zdCBhcmNoaXZlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFwcF9fYnV0dG9uLS1qcy1hcmNoaXZlJyk7XG5cbmNvbnN0IGNvdW50ZXJNYXhWYWx1ZSA9IDEwMDtcblxuY29uc3QgYmFzZUNsYXNzbmFtZSA9IFwiaW5kaWNhdG9yX19zZWN0aW9uIGluZGljYXRvcl9fc2VjdGlvbi0tanNcIjtcbmNvbnN0IGxvd0xldmVsQ2xhc3NuYW1lID0gYCR7YmFzZUNsYXNzbmFtZX0gaW5kaWNhdG9yX19zZWN0aW9uLS1sb3dgO1xuY29uc3QgbWVkaXVtTGV2ZWxDbGFzc25hbWUgPSBgJHtiYXNlQ2xhc3NuYW1lfSBpbmRpY2F0b3JfX3NlY3Rpb24tLW1lZGl1bWA7XG5jb25zdCBoaWdoTGV2ZWxDbGFzc25hbWUgPSBgJHtiYXNlQ2xhc3NuYW1lfSBpbmRpY2F0b3JfX3NlY3Rpb24tLWhpZ2hgO1xuXG4vKioqKioqKioqKiBGVU5DVElPTlMgKioqKioqKioqKi9cblxuLy8gY3JlYXRlIGh5ZHJBcHAgZGF0ZSBrZXlcbmNvbnN0IHNldERhdGVLZXkgPSAob2JqKSA9PiB7XG4gIGNvbnN0IHByZWZpeCA9ICdoeWRyQXBwLSc7XG4gIGNvbnN0IGRhdGUgPSBvYmoudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKTtcbiAgcmV0dXJuIHByZWZpeC5jb25jYXQoZGF0ZSk7XG59XG5cbi8vIGNyZWF0ZSBrZXkgdmFsdWUgcGFpciBpbiBsb2NhbFN0b3JhZ2VcbmNvbnN0IHNldE5ld0tleVZhbHVlID0gKGtleSwgdmFsdWUpID0+IHtcbiAgaWYgKCAhbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSApIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTtcbiAgfTtcbn1cblxuY29uc3QgZ2V0SHlkcmFwcEtleXMgPSAoKSA9PiB7XG4gIC8vIGNyZWF0ZSBhcnJheSBvZiBoeWRyQXBwIGxvY2FsU3RvcmFnZSBrZXlzXG4gIGNvbnN0IHJlZ2V4ID0gL2h5ZHJBcHAtLztcbiAgcmV0dXJuIE9iamVjdFxuICAua2V5cyhsb2NhbFN0b3JhZ2UpXG4gIC5maWx0ZXIoa2V5ID0+IHJlZ2V4LnRlc3Qoa2V5KSlcbiAgLnNvcnQoKVxuICAucmV2ZXJzZSgpO1xufVxuXG5jb25zdCBnZXRPZmZzZXRlZERhdGUgPSAoKSA9PiB7XG4gIGNvbnN0IHRpbWVab25lT2Zmc2V0ID0gKG5ldyBEYXRlKCkpLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMDtcbiAgcmV0dXJuIChuZXcgRGF0ZShEYXRlLm5vdygpIC0gdGltZVpvbmVPZmZzZXQpKTtcbn1cblxuXG5jb25zdCBzZXRDb3VudGVyID0gKCkgPT4ge1xuICBjb25zdCBvZmZzZXRlZERhdGUgPSBnZXRPZmZzZXRlZERhdGUoKTtcbiAgbGV0IGRhdGVLZXkgPSBzZXREYXRlS2V5KG9mZnNldGVkRGF0ZSk7XG4gIGNvbnNvbGUubG9nKGBuZXdlc3Qga2V5OiAke2RhdGVLZXl9YCk7XG5cbiAgc2V0TmV3S2V5VmFsdWUoZGF0ZUtleSwgMCk7XG5cbiAgY29uc3QgaHlkcmFwcEtleXMgPSBnZXRIeWRyYXBwS2V5cygpO1xuICBjb25zdCBvbGRlc3RLZXkgPSBoeWRyYXBwS2V5c1toeWRyYXBwS2V5cy5sZW5ndGgtMV07XG4gIGNvbnNvbGUubG9nKGBvbGRlc3Qga2V5OiAke29sZGVzdEtleX1gKTtcblxuICAvLyBhdXRvY29tcGxldGUgbWlzc2luZyBrZXlzIGluIGxvY2Fsc3RvcmFnZVxuICBpZiAoIGh5ZHJhcHBLZXlzLmxlbmd0aCA+IDEgKSB7XG4gICAgbGV0IGxpbWl0ID0gMDsgLy8gZm9yIHRlc3RzIHRvIGF2b2lkIGxvb3AgZXJyb3JcblxuICAgIHdoaWxlIChzZXREYXRlS2V5KG9mZnNldGVkRGF0ZSkgIT09IG9sZGVzdEtleSAmJiBsaW1pdCA8IDUwKSB7XG4gICAgICBvZmZzZXRlZERhdGUuc2V0RGF0ZSggb2Zmc2V0ZWREYXRlLmdldERhdGUoKSAtIDEgKTtcbiAgICAgIGNvbnN0IHByZXZEYXRlS2V5ID0gc2V0RGF0ZUtleShvZmZzZXRlZERhdGUpO1xuICAgICAgc2V0TmV3S2V5VmFsdWUocHJldkRhdGVLZXksIDApO1xuICAgICAgbGltaXQrKztcbiAgICB9XG4gIH1cbiAgY291bnRlci5pbm5lckhUTUwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShkYXRlS2V5KTtcbn1cblxuY29uc3Qgc2V0QXJjaGl2ZSA9ICgpID0+IHtcbiAgY29uc3QgaHlkcmFwcEtleXMgPSBnZXRIeWRyYXBwS2V5cygpO1xuXG4gIGlmIChoeWRyYXBwS2V5cy5sZW5ndGggPT09IDEpIHtcbiAgICBhcmNoaXZlTGlzdC5pbm5lckhUTUwgKz0gYFxuICAgICAgPGxpIGNsYXNzPVwiYXJjaGl2ZV9faXRlbSBhcmNoaXZlX19pdGVtLS1lbXB0eVwiPk5vIGhpc3RvcnkgeWV0Li4uPC9saT5cbiAgICAgIGA7XG4gIH0gZWxzZSB7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBoeWRyYXBwS2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qga2V5ID0gaHlkcmFwcEtleXNbaV07XG4gICAgICBjb25zdCB2YWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgICBjb25zdCBkYXRlID0ga2V5XG4gICAgICAgIC5yZXBsYWNlKCdoeWRyQXBwLScsJycpXG4gICAgICAgIC5zcGxpdCgnLScpXG4gICAgICAgIC5yZXZlcnNlKClcbiAgICAgICAgLmpvaW4oJyAnKTtcbiAgICAgIGNvbnN0IGRhdGVIYXNoID0gZGF0ZS5yZXBsYWNlKC9cXHMvZywnJyk7XG4gICAgICBcbiAgICAgIGFyY2hpdmVMaXN0LmlubmVySFRNTCArPSBgXG4gICAgICA8bGkgY2xhc3M9XCJhcmNoaXZlX19pdGVtIGFyY2hpdmVfX2l0ZW0tLWpzICR7a2V5fVwiPlxuICAgICAgICA8cCBjbGFzcz1cImFyY2hpdmVfX2RhdGVcIj4ke2RhdGV9PC9wPlxuICAgICAgICA8cCBjbGFzcz1cImFyY2hpdmVfX3ZhbHVlIGFyY2hpdmVfX3ZhbHVlLS1qc1wiPlxuICAgICAgICAgICR7dmFsdWV9XG4gICAgICAgIDwvcD5cbiAgICAgICAgPGRpdiBjbGFzcz1cImVkaXRpb25cIj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGVkaXRpb25fX2VkaXQgZWRpdGlvbl9fZWRpdC0tanNcIj5cbiAgICAgICAgICAgIDxpIGNsYXNzPVwiZWRpdGlvbl9faWNvbiBmYXIgZmEtZWRpdFwiPjwvaT5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZWRpdGlvbl9fZ3JvdXAgZWRpdGlvbl9fZ3JvdXAtLWpzXCI+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGVkaXRpb25fX2RlY3JlYXNlIGVkaXRpb25fX2RlY3JlYXNlLS1qc1wiPlxuICAgICAgICAgICAgICA8aSBjbGFzcz1cImVkaXRpb25fX2ljb24gZmFzIGZhLWNhcmV0LWxlZnRcIj48L2k+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gZWRpdGlvbl9faW5jcmVhc2UgZWRpdGlvbl9faW5jcmVhc2UtLWpzXCI+XG4gICAgICAgICAgICAgIDxpIGNsYXNzPVwiZWRpdGlvbl9faWNvbiBmYXMgZmEtY2FyZXQtcmlnaHRcIj48L2k+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gZWRpdGlvbl9fY2FuY2VsIGVkaXRpb25fX2NhbmNlbC0tanNcIj5cbiAgICAgICAgICAgICAgPGkgY2xhc3M9XCJlZGl0aW9uX19pY29uIGZhcyBmYS11bmRvXCI+PC9pPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGVkaXRpb25fX3NhdmUgZWRpdGlvbl9fc2F2ZS0tanNcIj5cbiAgICAgICAgICAgICAgPGkgY2xhc3M9XCJlZGl0aW9uX19pY29uIGZhciBmYS1zYXZlXCI+PC9pPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiaW5kaWNhdG9yIGluZGljYXRvci0tanMtJHtkYXRlSGFzaH1cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiJHtiYXNlQ2xhc3NuYW1lfVwiPjwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCIke2Jhc2VDbGFzc25hbWV9XCI+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cIiR7YmFzZUNsYXNzbmFtZX1cIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2xpPlxuICAgICAgYDtcbiAgXG4gICAgICBzZXRJbmRpY2F0b3JzKGRhdGVIYXNoLCB2YWx1ZSk7XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IHNldEluZGljYXRvcnMgPSAoaWQsIHZhbHVlKSA9PiB7XG4gIGNvbnN0IGluZGljYXRvcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuaW5kaWNhdG9yLS1qcy0ke2lkfSAuaW5kaWNhdG9yX19zZWN0aW9uLS1qc2ApO1xuXG4gIGlmICh2YWx1ZSA+PSA2KSB7XG4gICAgZm9yIChjb25zdCBpbmRpY2F0b3Igb2YgaW5kaWNhdG9ycykge1xuICAgICAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9IGhpZ2hMZXZlbENsYXNzbmFtZTtcbiAgICB9XG4gIH0gZWxzZSBpZiAodmFsdWUgPj0gMykge1xuICAgIGluZGljYXRvcnNbMF0uY2xhc3NOYW1lID0gbWVkaXVtTGV2ZWxDbGFzc25hbWU7XG4gICAgaW5kaWNhdG9yc1sxXS5jbGFzc05hbWUgPSBtZWRpdW1MZXZlbENsYXNzbmFtZTtcbiAgICBpbmRpY2F0b3JzWzJdLmNsYXNzTmFtZSA9IGJhc2VDbGFzc25hbWU7XG4gIH0gZWxzZSB7XG4gICAgaW5kaWNhdG9yc1swXS5jbGFzc05hbWUgPSBsb3dMZXZlbENsYXNzbmFtZTtcbiAgICBpbmRpY2F0b3JzWzFdLmNsYXNzTmFtZSA9IGJhc2VDbGFzc25hbWU7XG4gICAgaW5kaWNhdG9yc1syXS5jbGFzc05hbWUgPSBiYXNlQ2xhc3NuYW1lO1xuICB9XG59XG5cbmNvbnN0IHVwZGF0ZUNvdW50ZXIgPSAoZSkgPT4ge1xuICBjb25zdCBvZmZzZXRlZERhdGUgPSBnZXRPZmZzZXRlZERhdGUoKTtcbiAgY29uc3Qga2V5ID0gc2V0RGF0ZUtleShvZmZzZXRlZERhdGUpO1xuICBjb25zdCB2YWx1ZSA9IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkpO1xuICBsZXQgbmV3VmFsdWU7XG5cbiAgaWYgKGUudGFyZ2V0ID09PSBhZGRHbGFzcykge1xuICAgIHZhbHVlIDwgY291bnRlck1heFZhbHVlID8gbmV3VmFsdWUgPSB2YWx1ZSArIDEgOiBuZXdWYWx1ZSA9IGNvdW50ZXJNYXhWYWx1ZTtcbiAgfSBlbHNlIGlmIChlLnRhcmdldCA9PT0gcmVtb3ZlR2xhc3MpIHtcbiAgICB2YWx1ZSA+IDAgPyBuZXdWYWx1ZSA9IHZhbHVlIC0gMSA6IG5ld1ZhbHVlID0gMDtcbiAgfVxuXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgbmV3VmFsdWUpO1xuICBjb3VudGVyLmlubmVySFRNTCA9IG5ld1ZhbHVlO1xuICBcbiAgLy8gdXBkYXRpbmcgYXJjaGl2ZSBuZXdlc3QgZW50cnkgaW5kaWNhdG9yXG4gIGNvbnN0IGRhdGVIYXNoID0gb2Zmc2V0ZWREYXRlXG4gICAgLnRvSVNPU3RyaW5nKClcbiAgICAuc2xpY2UoMCwxMClcbiAgICAuc3BsaXQoJy0nKVxuICAgIC5yZXZlcnNlKClcbiAgICAuam9pbignJyk7XG4gIHNldEluZGljYXRvcnMoZGF0ZUhhc2gsIG5ld1ZhbHVlKTtcbn1cblxuY29uc3QgdG9nZ2xlQXJjaGl2ZSA9IChlKSA9PiB7XG4gIGNvbnN0IGxpc3RIZWlnaHQgPSBhcmNoaXZlTGlzdC5jbGllbnRIZWlnaHQ7XG5cbiAgaWYgKGFyY2hpdmUuY2xhc3NMaXN0LmNvbnRhaW5zKCdhcmNoaXZlLS12aXNpYmxlJykpIHtcbiAgICBhcmNoaXZlLmNsYXNzTGlzdC5yZW1vdmUoJ2FyY2hpdmUtLXZpc2libGUnKTtcbiAgICBhcmNoaXZlLnN0eWxlLmhlaWdodCA9IDA7XG4gICAgZS50YXJnZXQudGV4dENvbnRlbnQgPSBcIlNob3cgYXJjaGl2ZVwiO1xuICB9IGVsc2Uge1xuICAgIGFyY2hpdmUuY2xhc3NMaXN0LmFkZCgnYXJjaGl2ZS0tdmlzaWJsZScpO1xuICAgIGFyY2hpdmUuc3R5bGUuaGVpZ2h0ID0gbGlzdEhlaWdodCArIFwicHhcIjtcbiAgICBlLnRhcmdldC50ZXh0Q29udGVudCA9IFwiSGlkZSBhcmNoaXZlXCI7XG4gIH1cbn1cblxuXG5cblxuXG5cblxuY29uc3QgaGFuZGxlSXRlbUVkaXQgPSAoZSkgPT4ge1xuICBjb25zdCBpdGVtSW5kZXggPSBlLnRhcmdldC5pbmRleDtcbiAgY29uc3QgYXJjaGl2ZUl0ZW0gPSBhcmNoaXZlSXRlbXNbaXRlbUluZGV4XTtcbiAgY29uc3QgZWRpdEJ1dHRvbiA9IGVkaXRCdXR0b25zW2l0ZW1JbmRleF07XG4gIGNvbnN0IGVkaXRHcm91cCA9IGVkaXRHcm91cHNbaXRlbUluZGV4XTtcbiAgY29uc3QgZGVjcmVhc2VCdXR0b24gPSBkZWNyZWFzZUJ1dHRvbnNbaXRlbUluZGV4XTtcbiAgY29uc3QgaW5jcmVhc2VCdXR0b24gPSBpbmNyZWFzZUJ1dHRvbnNbaXRlbUluZGV4XTtcbiAgY29uc3QgY2FuY2VsQnV0dG9uID0gY2FuY2VsQnV0dG9uc1tpdGVtSW5kZXhdO1xuICBjb25zdCBzYXZlQnV0dG9uID0gc2F2ZUJ1dHRvbnNbaXRlbUluZGV4XTtcbiAgY29uc3QgYXJjaGl2ZVZhbHVlID0gYXJjaGl2ZVZhbHVlc1tpdGVtSW5kZXhdO1xuXG4gIGNvbnN0IGl0ZW1DbGFzc05hbWUgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lO1xuICBjb25zdCBoeWRyQXBwS2V5ID0gaXRlbUNsYXNzTmFtZVxuICAgIC5zcGxpdCgnICcpXG4gICAgLmZpbHRlcihrZXkgPT4gL2h5ZHJBcHAvLnRlc3Qoa2V5KSlcbiAgICAudG9TdHJpbmcoKTtcblxuXG5cbiAgXG4gIFxuICBjb25zdCB0b2dnbGVJdGVtRWRpdCA9ICgpID0+IHtcbiAgICBhcmNoaXZlSXRlbS5jbGFzc0xpc3QudG9nZ2xlKCdhcmNoaXZlX19pdGVtLS1vbi10b3AnKTtcbiAgICBlZGl0QnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2VkaXRpb25fX2VkaXQtLWhpZGRlbicpO1xuICAgIGVkaXRHcm91cC5jbGFzc0xpc3QudG9nZ2xlKCdlZGl0aW9uX19ncm91cC0tdmlzaWJsZScpO1xuICAgIHBhZ2VPdmVybGF5LmNsYXNzTGlzdC50b2dnbGUoJ3BhZ2Utb3ZlcmxheS0tdmlzaWJsZScpO1xuICAgIGNhbmNlbEJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZUl0ZW1FZGl0KTtcbiAgICBwYWdlT3ZlcmxheS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZUl0ZW1FZGl0KTtcbiAgfVxuXG4gIGNvbnN0IGRlY3JlYXNlVmFsdWUgPSAoKSA9PiB7ICAgLy8gWk9QVFlNQUxJWk9XQUMgWiBVUERBVEUgQ09VTlRFUlxuICAgIGxldCB2YWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGh5ZHJBcHBLZXkpO1xuICAgIHZhbHVlID4gMCA/IHZhbHVlLS0gOiBmYWxzZTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShoeWRyQXBwS2V5LCB2YWx1ZSk7XG4gICAgYXJjaGl2ZVZhbHVlLnRleHRDb250ZW50ID0gdmFsdWU7XG4gIH1cblxuICBjb25zdCBpbmNyZWFzZVZhbHVlID0gKCkgPT4geyAgIC8vIFpPUFRZTUFMSVpPV0FDIFogVVBEQVRFIENPVU5URVJcbiAgICBsZXQgdmFsdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShoeWRyQXBwS2V5KTtcbiAgICB2YWx1ZSA8IGNvdW50ZXJNYXhWYWx1ZSA/IHZhbHVlKysgOiBmYWxzZTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShoeWRyQXBwS2V5LCB2YWx1ZSk7XG4gICAgYXJjaGl2ZVZhbHVlLnRleHRDb250ZW50ID0gdmFsdWU7XG4gIH1cblxuICB0b2dnbGVJdGVtRWRpdCgpO1xuXG5cbiAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlSXRlbUVkaXQpO1xuICBwYWdlT3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZUl0ZW1FZGl0KTtcbiAgZGVjcmVhc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkZWNyZWFzZVZhbHVlKTtcbiAgaW5jcmVhc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpbmNyZWFzZVZhbHVlKTtcbn1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbnNldENvdW50ZXIoKTtcbnNldEFyY2hpdmUoKTtcblxuY29uc3QgYXJjaGl2ZUl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFyY2hpdmVfX2l0ZW0tLWpzJyk7XG5jb25zdCBlZGl0QnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lZGl0aW9uX19lZGl0LS1qcycpO1xuY29uc3QgZWRpdEdyb3VwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lZGl0aW9uX19ncm91cC0tanMnKTtcbmNvbnN0IGRlY3JlYXNlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lZGl0aW9uX19kZWNyZWFzZS0tanMnKTtcbmNvbnN0IGluY3JlYXNlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lZGl0aW9uX19pbmNyZWFzZS0tanMnKTtcbmNvbnN0IGNhbmNlbEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdGlvbl9fY2FuY2VsLS1qcycpO1xuY29uc3Qgc2F2ZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdGlvbl9fc2F2ZS0tanMnKTtcbmNvbnN0IGFyY2hpdmVWYWx1ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYXJjaGl2ZV9fdmFsdWUtLWpzJyk7XG5cbmFkZEdsYXNzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdXBkYXRlQ291bnRlcik7XG5yZW1vdmVHbGFzcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHVwZGF0ZUNvdW50ZXIpO1xuYXJjaGl2ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZUFyY2hpdmUpO1xuXG5mb3IgKGxldCBpID0gMDsgaSA8IGVkaXRCdXR0b25zLmxlbmd0aDsgaSsrKSB7XG4gIGNvbnN0IGVkaXRCdXR0b24gPSBlZGl0QnV0dG9uc1tpXTtcbiAgZWRpdEJ1dHRvbi5pbmRleCA9IGk7XG4gIGVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVJdGVtRWRpdCk7XG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n")}]);