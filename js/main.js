!function(e){var n={};function t(c){if(n[c])return n[c].exports;var l=n[c]={i:c,l:!1,exports:{}};return e[c].call(l.exports,l,l.exports,t),l.l=!0,l.exports}t.m=e,t.c=n,t.d=function(e,n,c){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:c})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(t.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var l in e)t.d(c,l,function(n){return e[n]}.bind(null,l));return c},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(module,exports,__webpack_require__){"use strict";eval("\n\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', function() {\n    navigator.serviceWorker.register('serviceworker.js').then(function(registration) {\n      // Registration was successful\n      console.log('ServiceWorker registration successful with scope: ', registration.scope);\n    }, function(err) {\n      // registration failed :(\n      console.log('ServiceWorker registration failed: ', err);\n    });\n  });\n}\n\n/********** VARIABLES **********/\n\nconst addGlass = document.querySelector('.app__button--js-add');\nconst removeGlass = document.querySelector('.app__button--js-remove');\nconst counter = document.querySelector('.glass__counter--js');\nconst historyList = document.querySelector('.history__list--js');\n\n/********** FUNCTIONS **********/\n\n// create hydrApp date key\nconst setDateKey = (obj) => {\n  const prefix = 'hydrApp-';\n  const date = obj.toISOString().slice(0,10);\n  return prefix.concat(date);\n}\n\n// create key value pair in localStorage\nconst setNewKeyValue = (key, value) => {\n  if ( !localStorage.getItem(key) ) {\n    localStorage.setItem(key, value);\n  };\n}\n\nconst getHydrappKeys = () => {\n  // create array of hydrApp localStorage keys\n  const regex = /hydrApp-/;\n  return Object\n  .keys(localStorage)\n  .filter(key => regex.test(key))\n  .sort((a,b) => a<b);\n}\n\nconst setCounter = () => {\n  let date = new Date();\n  let dateKey = setDateKey(date);\n\n  setNewKeyValue(dateKey, 0);\n\n  const hydrappKeys = getHydrappKeys();\n  const oldestKey = hydrappKeys[hydrappKeys.length-1];\n\n  // autocomplete missing keys\n  if ( hydrappKeys.length > 1 ) {\n    let limit = 0;\n\n    while (setDateKey(date) !== oldestKey && limit < 50) {\n      date.setDate( date.getDate() - 1 );\n      const prevDateKey = setDateKey(date);\n      setNewKeyValue(prevDateKey, 0);\n      limit++;\n    }\n  }\n  counter.innerHTML = localStorage.getItem(dateKey);\n}\n\nconst setHistory = () => {\n  const hydrappKeys = getHydrappKeys();\n\n  for (const key of hydrappKeys) {\n    const value = localStorage.getItem(key);\n    historyList.innerHTML += `\n    <li>\n      <span>${key}</span>\n      <span>${value}</span>\n    </li>\n    `;\n  }\n\n}\n\nconst updateCounter = (e) => {\n  const key = setDateKey(new Date());\n  const value = parseInt(localStorage.getItem(key));\n  let newValue;\n\n  if (e.target === addGlass) {\n    value < 100 ? newValue = value + 1 : newValue = 100;\n  } else if (e.target === removeGlass) {\n    value > 0 ? newValue = value - 1 : newValue = 0;\n  }\n\n  localStorage.setItem(key, newValue);\n  counter.innerHTML = newValue;\n}\n\n\nsetCounter();\nsetHistory();\naddGlass.addEventListener('click', updateCounter);\nremoveGlass.addEventListener('click', updateCounter);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFpbi5qcz85MjkxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsSUFBSTtBQUNsQixjQUFjLE1BQU07QUFDcEI7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuaWYgKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IpIHtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHtcbiAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3Rlcignc2VydmljZXdvcmtlci5qcycpLnRoZW4oZnVuY3Rpb24ocmVnaXN0cmF0aW9uKSB7XG4gICAgICAvLyBSZWdpc3RyYXRpb24gd2FzIHN1Y2Nlc3NmdWxcbiAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aWNlV29ya2VyIHJlZ2lzdHJhdGlvbiBzdWNjZXNzZnVsIHdpdGggc2NvcGU6ICcsIHJlZ2lzdHJhdGlvbi5zY29wZSk7XG4gICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAvLyByZWdpc3RyYXRpb24gZmFpbGVkIDooXG4gICAgICBjb25zb2xlLmxvZygnU2VydmljZVdvcmtlciByZWdpc3RyYXRpb24gZmFpbGVkOiAnLCBlcnIpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuLyoqKioqKioqKiogVkFSSUFCTEVTICoqKioqKioqKiovXG5cbmNvbnN0IGFkZEdsYXNzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFwcF9fYnV0dG9uLS1qcy1hZGQnKTtcbmNvbnN0IHJlbW92ZUdsYXNzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFwcF9fYnV0dG9uLS1qcy1yZW1vdmUnKTtcbmNvbnN0IGNvdW50ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2xhc3NfX2NvdW50ZXItLWpzJyk7XG5jb25zdCBoaXN0b3J5TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oaXN0b3J5X19saXN0LS1qcycpO1xuXG4vKioqKioqKioqKiBGVU5DVElPTlMgKioqKioqKioqKi9cblxuLy8gY3JlYXRlIGh5ZHJBcHAgZGF0ZSBrZXlcbmNvbnN0IHNldERhdGVLZXkgPSAob2JqKSA9PiB7XG4gIGNvbnN0IHByZWZpeCA9ICdoeWRyQXBwLSc7XG4gIGNvbnN0IGRhdGUgPSBvYmoudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKTtcbiAgcmV0dXJuIHByZWZpeC5jb25jYXQoZGF0ZSk7XG59XG5cbi8vIGNyZWF0ZSBrZXkgdmFsdWUgcGFpciBpbiBsb2NhbFN0b3JhZ2VcbmNvbnN0IHNldE5ld0tleVZhbHVlID0gKGtleSwgdmFsdWUpID0+IHtcbiAgaWYgKCAhbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSApIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTtcbiAgfTtcbn1cblxuY29uc3QgZ2V0SHlkcmFwcEtleXMgPSAoKSA9PiB7XG4gIC8vIGNyZWF0ZSBhcnJheSBvZiBoeWRyQXBwIGxvY2FsU3RvcmFnZSBrZXlzXG4gIGNvbnN0IHJlZ2V4ID0gL2h5ZHJBcHAtLztcbiAgcmV0dXJuIE9iamVjdFxuICAua2V5cyhsb2NhbFN0b3JhZ2UpXG4gIC5maWx0ZXIoa2V5ID0+IHJlZ2V4LnRlc3Qoa2V5KSlcbiAgLnNvcnQoKGEsYikgPT4gYTxiKTtcbn1cblxuY29uc3Qgc2V0Q291bnRlciA9ICgpID0+IHtcbiAgbGV0IGRhdGUgPSBuZXcgRGF0ZSgpO1xuICBsZXQgZGF0ZUtleSA9IHNldERhdGVLZXkoZGF0ZSk7XG5cbiAgc2V0TmV3S2V5VmFsdWUoZGF0ZUtleSwgMCk7XG5cbiAgY29uc3QgaHlkcmFwcEtleXMgPSBnZXRIeWRyYXBwS2V5cygpO1xuICBjb25zdCBvbGRlc3RLZXkgPSBoeWRyYXBwS2V5c1toeWRyYXBwS2V5cy5sZW5ndGgtMV07XG5cbiAgLy8gYXV0b2NvbXBsZXRlIG1pc3Npbmcga2V5c1xuICBpZiAoIGh5ZHJhcHBLZXlzLmxlbmd0aCA+IDEgKSB7XG4gICAgbGV0IGxpbWl0ID0gMDtcblxuICAgIHdoaWxlIChzZXREYXRlS2V5KGRhdGUpICE9PSBvbGRlc3RLZXkgJiYgbGltaXQgPCA1MCkge1xuICAgICAgZGF0ZS5zZXREYXRlKCBkYXRlLmdldERhdGUoKSAtIDEgKTtcbiAgICAgIGNvbnN0IHByZXZEYXRlS2V5ID0gc2V0RGF0ZUtleShkYXRlKTtcbiAgICAgIHNldE5ld0tleVZhbHVlKHByZXZEYXRlS2V5LCAwKTtcbiAgICAgIGxpbWl0Kys7XG4gICAgfVxuICB9XG4gIGNvdW50ZXIuaW5uZXJIVE1MID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oZGF0ZUtleSk7XG59XG5cbmNvbnN0IHNldEhpc3RvcnkgPSAoKSA9PiB7XG4gIGNvbnN0IGh5ZHJhcHBLZXlzID0gZ2V0SHlkcmFwcEtleXMoKTtcblxuICBmb3IgKGNvbnN0IGtleSBvZiBoeWRyYXBwS2V5cykge1xuICAgIGNvbnN0IHZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICBoaXN0b3J5TGlzdC5pbm5lckhUTUwgKz0gYFxuICAgIDxsaT5cbiAgICAgIDxzcGFuPiR7a2V5fTwvc3Bhbj5cbiAgICAgIDxzcGFuPiR7dmFsdWV9PC9zcGFuPlxuICAgIDwvbGk+XG4gICAgYDtcbiAgfVxuXG59XG5cbmNvbnN0IHVwZGF0ZUNvdW50ZXIgPSAoZSkgPT4ge1xuICBjb25zdCBrZXkgPSBzZXREYXRlS2V5KG5ldyBEYXRlKCkpO1xuICBjb25zdCB2YWx1ZSA9IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkpO1xuICBsZXQgbmV3VmFsdWU7XG5cbiAgaWYgKGUudGFyZ2V0ID09PSBhZGRHbGFzcykge1xuICAgIHZhbHVlIDwgMTAwID8gbmV3VmFsdWUgPSB2YWx1ZSArIDEgOiBuZXdWYWx1ZSA9IDEwMDtcbiAgfSBlbHNlIGlmIChlLnRhcmdldCA9PT0gcmVtb3ZlR2xhc3MpIHtcbiAgICB2YWx1ZSA+IDAgPyBuZXdWYWx1ZSA9IHZhbHVlIC0gMSA6IG5ld1ZhbHVlID0gMDtcbiAgfVxuXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgbmV3VmFsdWUpO1xuICBjb3VudGVyLmlubmVySFRNTCA9IG5ld1ZhbHVlO1xufVxuXG5cbnNldENvdW50ZXIoKTtcbnNldEhpc3RvcnkoKTtcbmFkZEdsYXNzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdXBkYXRlQ291bnRlcik7XG5yZW1vdmVHbGFzcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHVwZGF0ZUNvdW50ZXIpOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n")}]);